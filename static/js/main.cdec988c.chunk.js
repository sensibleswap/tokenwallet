(this["webpackJsonpbsv-web-wallet"]=this["webpackJsonpbsv-web-wallet"]||[]).push([[0],{111:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.Testnet="testnet",e.Mainnet="mainnet",e.STN="STN"}(n||(n={}))},12:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"i",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"h",(function(){return d})),a.d(t,"c",(function(){return b})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return f})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return p})),a.d(t,"l",(function(){return h})),a.d(t,"a",(function(){return j})),a.d(t,"k",(function(){return x}));var n=a(46),r=a.n(n),c=a(318);function s(e){for(var t=new r.a(e),a=0;a<(arguments.length<=1?0:arguments.length-1);a++)t=t.div(new r.a(a+1<1||arguments.length<=a+1?void 0:arguments[a+1]));return t.toString()}function i(e){for(var t=new r.a(e),a=0;a<(arguments.length<=1?0:arguments.length-1);a++)t=t.multipliedBy(new r.a(a+1<1||arguments.length<=a+1?void 0:arguments[a+1]));return t.toString()}function o(e){for(var t=new r.a(e),a=0;a<(arguments.length<=1?0:arguments.length-1);a++)t=t.plus(new r.a(a+1<1||arguments.length<=a+1?void 0:arguments[a+1]));return t.toString()}function d(e){for(var t=new r.a(e),a=0;a<(arguments.length<=1?0:arguments.length-1);a++)t=t.minus(new r.a(a+1<1||arguments.length<=a+1?void 0:arguments[a+1]));return t.toString()}function b(e){return new r.a(10).pow(e).toString()}function u(e,t){return new r.a(e).lt(new r.a(t))}function f(e,t){return new r.a(e).lte(new r.a(t))}function l(e,t){return new r.a(e).gt(new r.a(t))}function p(e,t){return new r.a(e).gte(new r.a(t))}function h(e){return new r.a(e).toString()}function j(e,t){t=t||.5;var a=e.toBuffer().length,n=e.getFee()/a;if(n<t){var r="The fee rate should not be less than ".concat(t,", but in the end it is ").concat(n);throw c.b.error(r),new Error(r)}}function x(e){return JSON.parse(JSON.stringify(e,(function(e,t){return"bigint"===typeof t?t.toString():t})))}},335:function(e,t){},40:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return m})),a.d(t,"i",(function(){return g})),a.d(t,"c",(function(){return O})),a.d(t,"f",(function(){return w})),a.d(t,"g",(function(){return k})),a.d(t,"h",(function(){return y})),a.d(t,"e",(function(){return S})),a.d(t,"d",(function(){return K})),a.d(t,"a",(function(){return N})),a.d(t,"l",(function(){return q})),a.d(t,"k",(function(){return M})),a.d(t,"j",(function(){return Z}));var n=a(10),r=a.n(n),c=a(317),s=a(32),i=a(28),o=a(30),d=a(111),b=a(109),u=a.n(b),f=a(100),l=a(12),p=a(65),h=a(475);function j(e){var t=e===d.a.Mainnet?"":"/test";return"https://api.sensiblequery.com".concat(t)}function x(e){return 0===e.code&&"ok"===e.msg}function v(e){return new Promise((function(t){return setTimeout(t,e)}))}function m(e,t){return l.b(e,l.c(t))}function g(e,t){try{return new o.bsv.Address(t,e),!0}catch(a){return!1}}function O(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a.Testnet,r=t;r+="|"+a+"|",r+=r.length+"|!@"+7*(7*a.length+t.length);var c=a.match(/[a-z]+/g)?a.match(/[a-z]+/g).length:1,s=a.match(/[A-Z]+/g)?a.match(/[A-Z]+/g).length:1,i=a.match(/[0-9]+/g)?a.match(/[0-9]+/g).length:1;r+=(i+c+s)*a.length+"3571",r+=r+""+r;var b=e.from(r);b=o.bsv.crypto.Hash.sha256(b);for(var u=0;u<=49;u++){var f=e.from(b.toString("hex"));b=o.bsv.crypto.Hash.sha256(f)}var l=o.bsv.crypto.Hash.sha256(e.from(b.toString("hex"))).toString("hex"),p=new o.bsv.PrivateKey(l,n),h=p.toAddress(n).toString();return{address:h,privateKey:p.toString(),publicKey:p.toPublicKey().toString()}}function w(e,t,a,n){var r=e===d.a.Mainnet?"":"/test";return"https://sensiblequery.com".concat(r,"/#/ft/utxo/").concat(n,"/").concat(a,"/").concat(t)}function k(e,t){var a="";return e===d.a.Mainnet&&(a="https://whatsonchain.com/address/"),e===d.a.Testnet&&(a="https://test.whatsonchain.com/address/"),a?a+=t:a}function y(e,t){var a="";return e===d.a.Mainnet&&(a="https://whatsonchain.com/tx/"),e===d.a.Testnet&&(a="https://test.whatsonchain.com/tx/"),a?a+=t:a}function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(r.a.mark((function e(t,a){var n,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.prev=1,s=1;case 3:return e.next=5,I(t,a,s);case 5:if(i=e.sent,n=[].concat(Object(c.a)(n),Object(c.a)(i)),0!==i.length){e.next=9;break}return e.abrupt("break",12);case 9:s++,e.next=3;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("getAddressSensibleFtList error"),console.error(e.t0);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function I(e,t,a){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(r.a.mark((function e(t,a,n){var c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j(t),e.next=3,u.a.get("".concat(c,"/ft/summary/").concat(a,"?cursor=").concat(20*(n-1),"&size=20"));case 3:if(s=e.sent,i=s.data,!x(i)){e.next=8;break}return e.abrupt("return",(i.data||[]).map((function(e){return{genesis:e.genesis,codehash:e.codehash,tokenName:e.name,tokenSymbol:e.symbol,tokenDecimal:e.decimal,balance:l.j(e.balance,e.pendingBalance)}})));case 8:throw new Error(i.msg);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,a){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(r.a.mark((function e(t,a,n){var c,s,i,o,d,b=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.length>3&&void 0!==b[3]?b[3]:16,s=(n-1)*c,i=j(t),e.next=5,u.a.get("".concat(i,"/address/").concat(a,"/utxo?cursor=").concat(s,"&size=").concat(c));case 5:if(o=e.sent,d=o.data,!x(d)){e.next=10;break}return e.abrupt("return",(d.data||[]).map((function(e){return{txId:e.txid,outputIndex:e.vout,satoshis:e.satoshi,address:a}})));case 10:throw new Error(d.msg);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(r.a.mark((function e(t,a){var n,c,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1,c="0";case 2:return e.next=4,P(t,a,n);case 4:if(s=e.sent,i=s.reduce((function(e,t){return l.j(e,t.satoshis)}),"0"),c=l.j(c,i),0!==s.length){e.next=9;break}return e.abrupt("break",12);case 9:n++;case 10:e.next=2;break;case 12:return console.log("balance",c),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(r.a.mark((function e(t,a){var n,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(t),console.log("sensible \u4ea4\u6613\u5e7f\u64ad",t,a),e.next=4,u.a.post("".concat(n,"/pushtx"),{txHex:a});case 4:if(c=e.sent,s=c.data,!x(s)){e.next=9;break}return e.abrupt("return",new o.bsv.Transaction(a).hash);case 9:throw new Error(s.msg);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){return"Insufficient balance."===e.message?new Error("Low bsv balance to pay miners"):e},_=function(e,t){var a=h.find((function(a){return a.codehash===e&&a.genesis===t}));return a?a.satotxList:[]},E=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var n=0,r=t;n<r.length;n++){var c=r[n];if(c&&c.length>0)return c}return[]};function q(e,t,a,n,r,c){return z.apply(this,arguments)}function z(){return(z=Object(i.a)(r.a.mark((function e(t,a,n,c,s,i){var o,d,b,u,p,h,j,x,m,g,O,w,k,y,S,T,I,A,P,F,K,C,N,B,q,z,D,H=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=H.length>6&&void 0!==H[6]&&H[6],d=H.length>7&&void 0!==H[7]&&H[7],b=_(s,i),a=E(a,b),console.log("signers",a),!(a&&a.length>0)){e.next=11;break}return e.next=8,f.SensibleFT.selectSigners(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,f.SensibleFT.selectSigners();case 13:e.t0=e.sent;case 14:return u=e.t0,p=new f.SensibleFT({network:t,purse:n,feeb:.5,signerSelecteds:u.signerSelecteds,signers:u.signers}),console.log("transferSensibleFt",c,t,s,i,a),e.prev=17,e.next=20,p.transfer({senderWif:n,receivers:c,codehash:s,genesis:i,utxos:o,noBroadcast:d});case 20:if(h=e.sent,j=h.txid,x=h.tx,m=h.routeCheckTx,!0!==d){e.next=26;break}return e.abrupt("return",{tx:x,routeCheckTx:m});case 26:return l.a(x),g=Z(t,x.serialize(!0)),e.abrupt("return",{txid:j,outputs:g.outputs});case 31:if(e.prev=31,e.t1=e.catch(17),O=L(e.t1),w=O.toString(),k=w.indexOf("The count of utxos should not be more than 3 in transfer")>0,y=w.indexOf("Too many token-utxos")>0,console.log("broadcast sensible ft error"),console.error(O),k||y){e.next=41;break}throw O;case 41:if(!k){e.next=74;break}return e.prev=42,e.next=45,V(t,n);case 45:return e.next=47,v(3e3);case 47:e.next=54;break;case 49:throw e.prev=49,e.t2=e.catch(42),console.log("merge bsv utxo fail"),console.error(e.t2),e.t2;case 54:return e.prev=54,e.next=57,p.transfer({senderWif:n,receivers:c,codehash:s,genesis:i});case 57:return S=e.sent,T=S.txid,I=S.tx,l.a(I),A=Z(t,I.serialize(!0)),e.abrupt("return",{txid:T,outputs:A.outputs});case 65:if(e.prev=65,e.t3=e.catch(54),P=L(e.t3),console.log("ft transfer fail after bsv utxo merge"),console.error(P),F=P.toString(),y=F.indexOf("Too many token-utxos")>0){e.next=74;break}throw P;case 74:if(!y){e.next=107;break}return e.prev=75,e.next=78,p.merge({ownerWif:n,codehash:s,genesis:i});case 78:return K=e.sent,C=K.tx,l.a(C),e.next=83,v(3e3);case 83:e.next=90;break;case 85:throw e.prev=85,e.t4=e.catch(75),console.log("merge ft utxo fail"),console.error(e.t4),e.t4;case 90:return e.prev=90,e.next=93,p.transfer({senderWif:n,receivers:c,codehash:s,genesis:i});case 93:return N=e.sent,B=N.txid,q=N.tx,l.a(q),z=Z(t,q.serialize(!0)),e.abrupt("return",{txid:B,outputs:z.outputs});case 101:throw e.prev=101,e.t5=e.catch(90),D=L(e.t5),console.log("ft transfer fail after ft utxo merge"),console.error(D),D;case 107:case"end":return e.stop()}}),e,null,[[17,31],[42,49],[54,65],[75,85],[90,101]])})))).apply(this,arguments)}var D=o.bsv.crypto.Signature,H=D.SIGHASH_ALL|D.SIGHASH_FORKID;function R(e,t,a,n){var r=new o.bsv.Transaction.Signature({publicKey:e.publicKey,prevTxId:t.inputs[a].prevTxId,outputIndex:t.inputs[a].outputIndex,inputIndex:a,signature:o.bsv.Transaction.Sighash.sign(t,e,n,a,t.inputs[a].output.script,t.inputs[a].output.satoshisBN),sigtype:n});t.inputs[a].setScript(o.bsv.Script.buildPublicKeyHashIn(r.publicKey,r.signature.toDER(),r.sigtype))}function W(e,t,a){var n=!0,r={},c=function(e,t){return"".concat(e,"_").concat(l.l(t))};t.outputs.forEach((function(e){var t=e.script.toAddress(a),n=e.satoshis,s=c(t,n);r[s]=(r[s]||0)+1}));for(var s=0;s<e.length;s++){var i=e[s],o=c(i.address,i.amount);if(!r[o]){n=!1;break}r[o]=r[o]-1}return n}function M(e,t,a){return J.apply(this,arguments)}function J(){return(J=Object(i.a)(r.a.mark((function e(t,a,n){var c,s,i,d,b,u,f,h,j,x,v,m,g,O,w,k,y=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=y.length>3&&void 0!==y[3]&&y[3],s=y.length>4&&void 0!==y[4]&&y[4],console.log("arguments",t,a,n),i=new o.bsv.PrivateKey(a,t).toAddress(t),e.next=6,K(t,i);case 6:if(d=e.sent,b=n.reduce((function(e,t){return l.j(e,t.amount)}),"0"),!l.f(d,b)){e.next=10;break}throw new Error("Insufficient_bsv_Balance");case 10:u="0",f=[],(h=new o.bsv.Transaction).feePerKb(500),j=456,x=16,v=1;case 17:return e.next=19,P(t,i,v,x);case 19:m=e.sent,g=0;case 21:if(!(g<m.length)){e.next=31;break}if(O=m[g],u=l.j(u,O.satoshis),f.push(O),h.addInput(new o.bsv.Transaction.Input.PublicKeyHash({output:new o.bsv.Transaction.Output({script:o.bsv.Script.buildPublicKeyHashOut(O.address),satoshis:O.satoshis}),prevTxId:O.txId,outputIndex:O.outputIndex,script:o.bsv.Script.empty()})),s||!l.g(l.j(b,j),u)){e.next=28;break}return e.abrupt("break",31);case 28:g++,e.next=21;break;case 31:if(s||!l.g(l.j(b,j),u)){e.next=33;break}return e.abrupt("break",38);case 33:if(!(m.length<=x)){e.next=35;break}return e.abrupt("break",38);case 35:v++,e.next=17;break;case 38:if(n.forEach((function(e){h.to(e.address,+e.amount)})),l.d(l.h(u,+b),0)&&h.change(i),l.f(l.h(u,h.getFee(),b),j)&&(h.clearOutputs(),n.forEach((function(e,t){n.length===t+1?h.change(e.address):h.to(e.address,+e.amount)}))),h.inputs.forEach((function(e,t){R(new o.bsv.PrivateKey(a),h,t,H)})),l.a(h),!0!==c){e.next=45;break}return e.abrupt("return",h);case 45:return e.next=47,N(t,h.serialize());case 47:return w=e.sent,k=Z(t,h.serialize(!0)),W(n,h,t)||(console.log(l.k({type:"bsvTransferAmountNotSatified",txid:h.hash,receivers:n,outputs:k.outputs})),p.b("bsvTransferAmountNotSatified_".concat(i,"_").concat(h.hash))),e.abrupt("return",{txid:w,outputs:k.outputs,fee:h.getFee()});case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return G.apply(this,arguments)}function G(){return(G=Object(i.a)(r.a.mark((function e(t,a){var n,c,s,i,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.bsv.PrivateKey(a,t).toAddress(t),e.next=3,P(t,n,1);case 3:return c=e.sent,(s=new o.bsv.Transaction).feePerKb(500),c.forEach((function(e){s.addInput(new o.bsv.Transaction.Input.PublicKeyHash({output:new o.bsv.Transaction.Output({script:o.bsv.Script.buildPublicKeyHashOut(e.address),satoshis:e.satoshis}),prevTxId:e.txId,outputIndex:e.outputIndex,script:o.bsv.Script.empty()}))})),s.change(n),s.inputs.forEach((function(e,t){R(new o.bsv.PrivateKey(a),s,t,H)})),l.a(s),e.next=12,N(t,s.serialize());case 12:return i=e.sent,d=Z(t,s.serialize(!0)),e.abrupt("return",{txid:i,outputs:d.outputs});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mainnet",a=f.SensibleFT.parseTokenScript(e,t);return a};function Z(e,t){var a;try{a=new o.bsv.Transaction(t)}catch(n){return{error:n.message}}return{inputs:a.inputs.map((function(t,a){var r=U(t.script.toBuffer(),e),c={index:a,prevTxId:t.prevTxId.toString("hex"),outputIndex:t.outputIndex,script:t.script.toString("hex")};try{var i=t.script.toAddress(e);i&&(c.address=i.toString())}catch(n){}return r?r.tokenAmount<=0?c:c=Object(s.a)(Object(s.a)({},c),{},{isFt:!0,ftDetail:{genesis:r.genesis,codehash:r.codehash,address:r.tokenAddress,decimal:r.decimalNum,name:r.tokenName,symbol:r.tokenSymbol}}):c})),outputs:a.outputs.map((function(t,a){var r=U(t.script.toBuffer(),e),c={index:a,satoshis:t.satoshis,script:t.script.toString("hex")};try{var i=t.script.toAddress(e);i&&(c.address=i.toString())}catch(n){}return r?r.tokenAmount<=0?c:c=Object(s.a)(Object(s.a)({},c),{},{isFt:!0,ftDetail:{genesis:r.genesis,codehash:r.codehash,address:r.tokenAddress,decimal:r.decimalNum,name:r.tokenName,symbol:r.tokenSymbol,amount:r.tokenAmount}}):c})),txid:a.hash}}}).call(this,a(8).Buffer)},417:function(e,t){},475:function(e){e.exports=JSON.parse('[{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"d486f42fd4930c964f6840a2997b0ef9b3abc38d","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"9757197ec84183cd39e2239e56c8cc04fce9f9cd","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]}]')},499:function(e,t,a){},522:function(e,t){},528:function(e,t){},531:function(e,t){},532:function(e,t){},554:function(e,t){},556:function(e,t){},565:function(e,t){},567:function(e,t){},593:function(e,t){},595:function(e,t){},600:function(e,t){},602:function(e,t){},608:function(e,t){},610:function(e,t){},622:function(e,t){},625:function(e,t){},664:function(e,t){},695:function(e,t){},814:function(e,t,a){},888:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),c=a(28),s=a(0),i=a.n(s),o=a(50),d=a.n(o),b=(a(499),a(32)),u=a(27),f=a(201),l=a(901),p=a(140),h=a(900),j=a(899),x=a(897),v=a(895),m=a(168),g=a(89),O=a(896),w=a(318),k=a(902),y=a(898),S=a(903),T=a(904),I=a(490),A=a(905),P=a(489),F=a(472),K=a(30),C=a(40),N=a(245),B=a(477),L={satotxApiPrefix:"https://api.satotx.com",satotxPubKey:"25108ec89eb96b99314619eb5b124f11f00307a833cda48f5ab1865a04d4cfa567095ea4dd47cdf5c7568cd8efa77805197a67943fe965b0a558216011c374aa06a7527b20b0ce9471e399fa752e8c8b72a12527768a9fc7092f1a7057c1a1514b59df4d154df0d5994ff3b386a04d819474efbd99fb10681db58b1bd857f6d5"},_={account:null,key:null,bsvBalance:null,sensibleFtList:[],satotxConfigMap:new Map};_.satotxConfigMap.set("5b3bfa8e7600d701e70551075573ea28fd16c25a39fe2bdafdc3e08b11ca76b800000000",[L,L,L]);var E=Object(B.a)(_),q=E.useGlobalState,z=E.getGlobalState,D=E.setGlobalState,H=a(100),R="accountStorageKey";function W(e){var t=e?JSON.stringify(e):"";localStorage.setItem(R,t)}function M(){var e=localStorage.getItem(R);return e?JSON.parse(e):null}function J(e){return H.SensibleFT.isSupportedToken(e)}var V=0,G=0;function U(){return Z.apply(this,arguments)}function Z(){return(Z=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(V),t=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z("account"),a=z("key"),t&&a){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(C.d)(t.network,a.address);case 7:n=e.sent,D("bsvBalance",{balance:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("getAddressBsvBalance err",t.network,a.address,e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,t();case 4:V=window.setInterval(t,5e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return Q.apply(this,arguments)}function Q(){return(Q=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(G),t=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z("account"),a=z("key"),t&&a){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(C.e)(t.network,a.address);case 7:n=e.sent,c=n.filter((function(e){return J(e.codehash)})),D("sensibleFtList",c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("getAddressSensibleFtList err",t.network,a.address,e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,t();case 4:G=window.setInterval(t,5e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return $.apply(this,arguments)}function $(){return($=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(t),!t){e.next=10;break}return a=Object(C.c)(t.email,t.password,t.network),D("account",t),D("key",a),e.next=7,Y();case 7:U(),e.next=12;break;case 10:D("account",null),D("key",null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function te(){return(te=Object(c.a)(r.a.mark((function e(){var t,a,n,s,i,o,d,b,u,f,l,p,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window!==window.top){e.next=2;break}return e.abrupt("return");case 2:t=JSON.parse(decodeURIComponent(window.location.hash.substr(1))),a=N(window.top,"*"),n=t.id,s=null,i=null,o=[],d=null,a.emit(n,{type:"ready"}),b=function(e,t){return!e&&!t||(null===e||void 0===e?void 0:e.balance)===(null===t||void 0===t?void 0:t.balance)},u=function(e,t){if(e.length!==t.length)return!1;e.sort((function(e,t){return e.genesis.localeCompare(t.genesis)})),t.sort((function(e,t){return e.genesis.localeCompare(t.genesis)}));for(var a=0;a<e.length;a++){var n=e[a],r=t[a];if(n.genesis!==r.genesis)return!1;if(n.balance!==r.balance)return!1}return!0},f=function(e,t){return(null===e||void 0===e?void 0:e.email)===(null===t||void 0===t?void 0:t.email)&&(null===e||void 0===e?void 0:e.network)===(null===t||void 0===t?void 0:t.network)&&(null===e||void 0===e?void 0:e.password)===(null===t||void 0===t?void 0:t.password)},l=function(){var e=Object(c.a)(r.a.mark((function e(){var t,c,l,p,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=M(),f(t,s)||a.emit(n,{type:"account",data:t}),!(s=t)){e.next=30;break}return d=Object(C.c)(s.email,s.password,s.network),e.prev=5,e.next=8,Object(C.d)(s.network,d.address);case 8:c=e.sent,l=b(i,{balance:c}),i={balance:c},l||a.emit(n,{type:"bsvBalance",data:i}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:return e.prev=16,e.next=19,Object(C.e)(s.network,d.address);case 19:p=e.sent,h=u(o,p),o=p,h||a.emit(n,{type:"sensibleFtBalance",data:o}),e.next=27;break;case 25:e.prev=25,e.t1=e.catch(16);case 27:return e.abrupt("return",!0);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,null,[[5,14],[16,25]])})));return function(){return e.apply(this,arguments)}}(),(p=function(e,t){a.on(n,function(){var s=Object(c.a)(r.a.mark((function c(s,i){var o,d,b,u;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=i.type,d=i.data,"request"!==o||(null===d||void 0===d?void 0:d.method)!==e){r.next=13;break}return b=d.requestId,r.prev=3,r.next=6,t(d.params);case 6:u=r.sent,a.emit(n,{type:"response",data:{requestId:b,method:e,response:u}}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),a.emit(n,{type:"response",data:{requestId:b,method:e,error:r.t0.toString()}});case 13:case"end":return r.stop()}}),c,null,[[3,10]])})));return function(e,t){return s.apply(this,arguments)}}())})("getAccount",Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(s){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",{name:s.email,email:s.email,network:s.network});case 5:case"end":return e.stop()}}),e)})))),p("getBsvBalance",Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)})))),p("getSensibleFtBalance",Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})))),p("getAddress",Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(d){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",d.address);case 5:case"end":return e.stop()}}),e)})))),p("logout",Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(null);case 1:case"end":return e.stop()}}),e)})))),p("ping",(function(){return null}));case 21:return e.next=23,l();case 23:return h=e.sent,e.next=26,ee(h?3e3:500);case 26:e.next=21;break;case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(s.useRef)(!1);Object(s.useEffect)((function(){t&&!a.current&&(a.current=!0,e())}),[e,t])}a(814);var ne=a(12),re=a(65),ce=a(109),se=a.n(ce),ie=a(7),oe=f.a.Option;function de(){var e=q("account"),t=Object(u.a)(e,1)[0],a=q("key"),n=Object(u.a)(a,1)[0],r=Object(s.useState)(!1),c=Object(u.a)(r,2),i=c[0],o=c[1],d=Object(s.useState)(""),b=Object(u.a)(d,2),x=b[0],v=b[1],m=Object(s.useState)(""),g=Object(u.a)(m,2),O=g[0],w=g[1],k=Object(s.useState)(!1),y=Object(u.a)(k,2),S=y[0],T=y[1];return Object(ie.jsxs)("div",{className:"header",children:[Object(ie.jsx)("div",{className:"logo",children:"Web Wallet"}),t&&Object(ie.jsx)(l.a,{title:"",content:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(p.a,{type:"link",onClick:function(){X(null)},children:"Logout"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(p.a,{type:"link",onClick:function(){var e=Object(C.g)(t.network,n.address);window.open(e)},children:"History"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(p.a,{type:"link",onClick:function(){window.open("http://github.com")},children:"Source Code"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(p.a,{type:"link",onClick:function(){return o(!0)},children:"decode rawtx"})]}),children:Object(ie.jsx)(p.a,{type:"link",children:t.email})}),Object(ie.jsxs)(h.a,{visible:i,onCancel:function(){return o(!1)},children:[Object(ie.jsx)(j.a.TextArea,{rows:4,value:x,onChange:function(e){return v(e.target.value)}}),Object(ie.jsxs)(f.a,{style:{width:180},placeholder:"Select network",value:O,onChange:function(e){return w(e)},children:[Object(ie.jsx)(oe,{value:"mainnet",children:"mainnet"}),Object(ie.jsx)(oe,{value:"testnet",children:"testnet"})]}),Object(ie.jsx)(p.a,{type:"primary",onClick:function(){var e=Object(C.j)(O,x);console.log("decodeTx res",e)},children:"decode"})]}),Object(ie.jsx)(h.a,{visible:S,onCancel:function(){return T(!1)}})]})}function be(){var e=q("account"),t=Object(u.a)(e,1)[0],a=x.a.useForm(),n=Object(u.a)(a,1)[0];return t?null:Object(ie.jsx)(v.a,{className:"card",title:"Login",bordered:!1,children:Object(ie.jsxs)(x.a,{form:n,layout:"vertical",onFinish:function(){h.a.confirm({title:"\u5b89\u5168\u6ce8\u610f",content:Object(ie.jsxs)("div",{children:["Web\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230\uff0c\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730(\u4ee3\u7801\u89c1",Object(ie.jsx)("a",{href:"https://github.com/klouskingsley/bsv-web-wallet",target:"_blank",rel:"noreferrer",children:"github"}),")\u3002\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\uff0c\u6216\u5728\u4f7f\u7528\u5b8c\u6210\u4e4b\u540e\u5c06\u5269\u4f59\u8d44\u91d1\u8f6c\u79fb\u3002\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4e22\u5931(\u5fd8\u8bb0\uff0c\u88ab\u76d7\u7b49\u60c5\u5f62)\u4f1a\u5bfc\u81f4\u8d44\u4ea7\u4e22\u5931"]}),onOk:function(){X(n.getFieldsValue())}})},children:[Object(ie.jsx)(x.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input a valid Email!"}],children:Object(ie.jsx)(j.a,{prefix:Object(ie.jsx)(S.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(ie.jsx)(x.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{min:6,message:"Password at least 6 chars",transform:function(e){return e&&e.trim()}}],children:Object(ie.jsx)(j.a.Password,{prefix:Object(ie.jsx)(T.a,{className:"site-form-item-icon"}),type:"password",visibilityToggle:!0,placeholder:"Password"})}),Object(ie.jsx)(x.a.Item,{name:"network",label:"Network",rules:[{required:!0}],children:Object(ie.jsxs)(f.a,{placeholder:"Select network",children:[Object(ie.jsx)(oe,{value:"mainnet",children:"mainnet"}),Object(ie.jsx)(oe,{value:"testnet",children:"testnet"})]})}),Object(ie.jsx)(x.a.Item,{children:"\u8bf4\u660e\uff1aWeb\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230(\u65e0\u9700\u6ce8\u518c)\uff0c\u6bcf\u6b21\u8f93\u5165\u76f8\u540c\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u767b\u5f55\u5373\u53ef\u8ba1\u7b97\u51fa\u76f8\u540c\u7684\u79c1\u94a5\uff0c\u79c1\u94a5\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730\uff0c\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\u3002"}),Object(ie.jsx)(x.a.Item,{children:Object(ie.jsx)(p.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})})}function ue(e){var t=e.onWithDraw,a=e.onTransfer,n=q("key"),r=Object(u.a)(n,1)[0],c=q("account"),s=Object(u.a)(c,1)[0],i=q("bsvBalance"),o=Object(u.a)(i,1)[0],d=q("sensibleFtList"),b=Object(u.a)(d,1)[0];if(!r||!s)return null;var f=function(e){return a(e||"")};return[Object(ie.jsx)(v.a,{className:"card",title:"Account Info",bordered:!1,actions:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(p.a,{type:"link",onClick:function(){var e=Object(C.g)(s.network,r.address);window.open(e)},children:"history"}),",",Object(ie.jsx)(p.a,{type:"link",onClick:t,children:"withdraw"}),","]}),children:Object(ie.jsxs)(x.a,{layout:"vertical",children:[Object(ie.jsxs)(x.a.Item,{label:"".concat(s.network," address"),children:[Object(ie.jsx)(j.a,{value:r.address}),Object(ie.jsx)("div",{style:{margin:20},children:Object(ie.jsx)(F,{value:r.address})})]}),Object(ie.jsx)(x.a.Item,{label:"privateKey",children:Object(ie.jsx)(j.a.Password,{visibilityToggle:!0,value:r.privateKey})})]})}),Object(ie.jsx)(v.a,{className:"card",title:"Asset",bordered:!1,children:Object(ie.jsxs)(x.a,{layout:"vertical",children:[o&&Object(ie.jsx)(x.a.Item,{label:"BSV balance",children:Object(ie.jsxs)(m.a,{justify:"space-between",children:[Object(ie.jsx)(g.a,{span:16,children:Object(ie.jsx)("div",{children:Object(C.b)(o.balance,8)})}),Object(ie.jsx)(g.a,{span:7,children:Object(ie.jsx)(p.a,{type:"link",onClick:function(){return f("")},children:"Transfer BSV"})})]})}),b.length>0&&Object(ie.jsx)(x.a.Item,{label:"Sensible Fungible Token",children:Object(ie.jsx)(O.b,{itemLayout:"horizontal",dataSource:b,renderItem:function(e){return Object(ie.jsxs)(O.b.Item,{actions:Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)(l.a,{placement:"topRight",content:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:["codehash: ",e.codehash]}),",",Object(ie.jsxs)("div",{children:["genesis: ",e.genesis]}),","]}),children:Object(ie.jsx)("a",{href:Object(C.f)(s.network,r.address,e.genesis,e.codehash),rel:"noreferrer",target:"_blank",children:"more info"},"list-loadmore-more")})}),children:[Object(ie.jsx)(O.b.Item.Meta,{title:e.tokenSymbol,description:e.tokenName}),Object(ie.jsxs)(m.a,{children:[Object(ie.jsx)(g.a,{children:Object(ie.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center"},children:["Balance:"," ",Object(C.b)(e.balance,e.tokenDecimal)]})}),Object(ie.jsx)(g.a,{children:Object(ie.jsx)(p.a,{type:"link",onClick:function(){return f(e.genesis)},children:"Go Transfer"})})]})]},e.genesis)}})})]})})]}function fe(e){return se.a.get(e)}function le(){return pe.apply(this,arguments)}function pe(){return(pe=Object(c.a)(r.a.mark((function e(){var t,a,n,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:[],a=[],n=[],t.forEach((function(e){a.push(fe(e))})),e.abrupt("return",new Promise((function(e){se.a.all(a).then((function(a){a.forEach((function(e,a){n.push({satotxApiPrefix:t[a],satotxPubKey:e.data.data.pubKey})})),e(n)}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var t=e.initDatas,a=void 0===t?[]:t,n=e.onCancel,i=e.onTransferCallback,o=q("key"),d=Object(u.a)(o,1)[0],f=q("bsvBalance"),l=Object(u.a)(f,1)[0],O=q("account"),S=Object(u.a)(O,1)[0],T=q("sensibleFtList"),F=Object(u.a)(T,1)[0],N=x.a.useForm(),B=Object(u.a)(N,1)[0],L=Object(s.useState)(!1),_=Object(u.a)(L,2),E=_[0],z=_[1];if(ae((function(){var e={};a.forEach((function(t,a){var n=!t.genesis,r=F.find((function(e){return e.genesis===t.genesis})),c=n?8:r.tokenDecimal;e["receiverList".concat(a)]=t.receivers.map((function(e){return{address:e.address,amount:ne.b(e.amount,ne.c(c))}}))})),B.setFieldsValue(e)}),d&&l),!d)return null;if(!l)return null;var D=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=B.getFieldsValue(),n=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,s,o,b,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.formatReceiverList,n=t.noBroadcast,z(!0),s="",e.prev=3,!0!==n){e.next=10;break}return!0,e.next=8,Object(C.k)(S.network,d.privateKey,a,n,true);case 8:return o=e.sent,e.abrupt("return",o);case 10:return e.next=12,Object(C.k)(S.network,d.privateKey,a);case 12:b=e.sent,c=b,s=b.txid,e.next=26;break;case 17:e.prev=17,e.t0=e.catch(3),u="broadcast error: "+e.t0.toString(),re.a(e.t0),re.b("bsvTransferFail_".concat(d.address)),i({error:u}),console.log("broadcast bsv error "),console.error(e.t0),w.b.error(e.t0.toString());case 26:return re.b("bsvTransferSuccess_".concat(d.address,"_").concat(s)),e.abrupt("return",c);case 28:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,s,o,b,u,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.formatReceiverList,n=t.token,t.decimal,t.genesis,c=t.rabinApis,s=t.utxos,o=t.noBroadcast,z(!0),e.prev=2,e.next=5,le(c);case 5:return u=e.sent,e.next=8,Object(C.l)(S.network,u,d.privateKey,a,n.codehash,n.genesis,s,o||!1);case 8:f=e.sent,b=f,e.next=20;break;case 12:e.prev=12,e.t0=e.catch(2),re.a(e.t0),re.b("ftTransferFail_".concat(d.address,"_").concat(n.genesis,"_").concat(n.genesis)),i({error:"broadcast sensible ft error, "+e.t0.toString()}),console.log("broadcast sensible ft error "),console.error(e.t0),w.b.error(e.t0.toString());case 20:return e.abrupt("return",b);case 21:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(){var c,o,u,f,p,h,j,x,v,m,g,O,k;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],o=[],u=[],f=r.a.mark((function e(o){var b,f,p,h,j,x,v,m,g,O,k,y,T,I,A,P,C,N,B;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=a[o],f=!b.genesis,p=F.find((function(e){return e.genesis===b.genesis})),h=f?8:p.tokenDecimal,j=f?l.balance:p.balance,x=b.rabinApis,v=t["receiverList".concat(o)].reduce((function(e,t){return ne.j(e,t.amount)}),0),m=ne.i(v,ne.c(h)),!ne.f(j,m)){e.next=12;break}return i({error:g="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(g)});case 12:if(O=b.receivers.map((function(e){return{address:e.address,amount:e.amount}})),!f){e.next=28;break}return e.next=16,n({formatReceiverList:O,noBroadcast:!0});case 16:if(k=e.sent,1===(y=k.outputs.length-1)){e.next=22;break}return i({error:T="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(T)});case 22:I=k.outputs[y],c.push([k,!0]),(u=[]).push({txId:k.id,outputIndex:y,satoshis:I.satoshis,wif:d.privateKey,address:new K.bsv.PrivateKey(d.privateKey,S.network).toAddress(S.network)}),e.next=39;break;case 28:return e.next=30,s({formatReceiverList:O,token:p,decimal:h,genesis:b.genesis,rabinApis:x,utxos:u,noBroadcast:!0});case 30:A=e.sent,P=A.routeCheckTx,C=A.tx,c.push([P,!1]),c.push([C,!0]),N=C.outputs.length-1,B=C.outputs[N],(u=[]).push({txId:C.id,outputIndex:N,satoshis:B.satoshis,wif:d.privateKey,address:new K.bsv.PrivateKey(d.privateKey,S.network).toAddress(S.network)});case 39:case"end":return e.stop()}}),e)})),p=0;case 5:if(!(p<a.length)){e.next=13;break}return e.delegateYield(f(p),"t0",7);case 7:if("object"!==typeof(h=e.t0)){e.next=10;break}return e.abrupt("return",h.v);case 10:p++,e.next=5;break;case 13:j=0,x=c;case 14:if(!(j<x.length)){e.next=25;break}return v=x[j],m=v[0],g=m.serialize(!0),e.next=20,Object(C.a)(S.network,g);case 20:O=e.sent,!0===v[1]&&(k=Object(C.j)(S.network,g),o.push({txid:O,outputs:k.outputs,fee:m.getFee()}));case 22:j++,e.next=14;break;case 25:z(!1),i({response:Object(b.a)({},o)});case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h.a.confirm({title:"Confirm the transaction",onOk:function(){o()}});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ie.jsx)(v.a,{className:"card",title:Object(ie.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){n()},children:[Object(ie.jsx)(I.a,{}),"Transfer"]}),loading:E,bordered:!1,children:Object(ie.jsxs)(x.a,{form:B,layout:"vertical",onFinish:D,children:[a.map((function(e,t){var a=!e.genesis,n=F.find((function(t){return t.genesis===e.genesis}));if(!a&&!n)return null;var r=a?"BSV":n.tokenSymbol,c=a?8:n.tokenDecimal,s=a?l.balance:n.balance,i=Object(C.b)(s,c),o=!(e.receivers.length>0);return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("div",{className:"transfer-line",children:a?"Coin: ".concat(r):"Token: ".concat(r)}),!a&&Object(ie.jsxs)("div",{className:"transfer-line",children:["Genesis: ",n.genesis]}),!a&&Object(ie.jsxs)("div",{className:"transfer-line",children:["Codehash: ",n.codehash]}),Object(ie.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ie.jsx)(g.a,{span:14,children:Object(ie.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(ie.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(i)}),Object(ie.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(d.address)}),Object(ie.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ie.jsx)(g.a,{span:14,children:Object(ie.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(ie.jsx)(x.a.List,{name:"receiverList".concat(t),children:function(e,t){var a=t.add,n=t.remove;return Object(ie.jsxs)(ie.Fragment,{children:[e.map((function(e,t,a){for(var r=arguments.length,c=new Array(r>3?r-3:0),s=3;s<r;s++)c[s-3]=arguments[s];return Object(ie.jsxs)(k.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(ie.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},c),{},{name:[t,"address"],fieldKey:[a,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,t){return Object(C.i)(S.network,t)?Promise.resolve():Promise.reject()}}],children:Object(ie.jsx)(j.a,{placeholder:"Input the address",disabled:!o})})),Object(ie.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},c),{},{name:[t,"amount"],fieldKey:[a,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(ie.jsx)(y.a,{placeholder:"Amount",min:0,disabled:!o})})),Object(ie.jsx)(p.a,{disabled:!o,size:"small",onClick:function(){return n(t)},shape:"circle",icon:Object(ie.jsx)(A.a,{})})]},e.fieldKey)})),Object(ie.jsx)(x.a.Item,{children:Object(ie.jsx)(p.a,{type:"dashed",onClick:function(){return a()},icon:Object(ie.jsx)(P.a,{}),disabled:!o,children:"Add Output"})})]})}})]},t)})),Object(ie.jsx)(x.a.Item,{children:Object(ie.jsx)(p.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}function je(e){var t=e.genesis,a=void 0===t?"":t,n=e.initReceivers,i=void 0===n?[]:n,o=e.rabinApis,d=void 0===o?[]:o,f=e.onCancel,l=e.onTransferCallback,O=q("key"),S=Object(u.a)(O,1)[0],T=q("bsvBalance"),F=Object(u.a)(T,1)[0],K=q("account"),N=Object(u.a)(K,1)[0],B=q("sensibleFtList"),L=Object(u.a)(B,1)[0],_=x.a.useForm(),E=Object(u.a)(_,1)[0],z=Object(s.useState)(!1),D=Object(u.a)(z,2),H=D[0],R=D[1],W=!(i.length>0);if(ae((function(){var e=""===a,t=L.find((function(e){return e.genesis===a})),n=e?8:t.tokenDecimal;console.log("initReceivers",i,i.map((function(e){return{address:e.address,amount:ne.i(e.amount,ne.c(n))}}))),E.setFieldsValue({receiverList:i.map((function(e){return{address:e.address,amount:ne.b(e.amount,ne.c(n))}}))})}),S&&F&&i.length),!S)return null;if(!F)return null;if(a&&!L.length)return null;var M=""===a,J=L.find((function(e){return e.genesis===a}));if(!M&&!J)return null;var V=M?"BSV":J.tokenSymbol,G=M?8:J.tokenDecimal,U=M?F.balance:J.balance,Z=Object(C.b)(U,G),Y=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,s,i,o,u,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.getFieldsValue(),a=t.receiverList,n=a.reduce((function(e,t){return ne.j(e,t.amount)}),0),s=ne.i(n,ne.c(G)),!ne.f(U,s)){e.next=7;break}return l({error:i="Insufficient ft balance"}),e.abrupt("return",w.b.error(i));case 7:o=a.map((function(e){return{address:e.address,amount:ne.i(e.amount,ne.c(G))}})),u=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),t="",e.prev=2,e.next=5,Object(C.k)(N.network,S.privateKey,o);case 5:n=e.sent,a=n,t=n.txid,e.next=20;break;case 10:e.prev=10,e.t0=e.catch(2),c="broadcast error: "+e.t0.toString(),console.log(ne.k({type:"bsvTransferFail",msg:c,account:{network:N.network,address:S.address},receivers:o})),re.a(e.t0),re.b("bsvTransferFail_".concat(S.address)),l({error:c}),console.log("broadcast bsv error "),console.error(e.t0),w.b.error(e.t0.toString());case 20:R(!1),t&&(console.log(ne.k(Object(b.a)({type:"bsvTransferSuccess",account:{network:N.network,address:S.address},receivers:o,txid:t},a))),re.b("bsvTransferSuccess_".concat(S.address,"_").concat(t)),l({response:Object(b.a)({},a)}),h.a.success({title:"Transaction broadcast success",content:Object(ie.jsxs)("div",{children:["txid:"," ",Object(ie.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(C.h)(N.network,t),children:t})]})}));case 22:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),t="",e.prev=2,e.next=5,le(d);case 5:return n=e.sent,e.next=8,Object(C.l)(N.network,n,S.privateKey,o,J.codehash,J.genesis);case 8:c=e.sent,a=c,t=c.txid,e.next=22;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("broadcast sensible ft error "),console.error(e.t0),w.b.error(e.t0.toString()),console.log(ne.k({type:"ftTransferFail",msg:ne.k(e.t0.message),account:{network:N.network,address:S.address},genesis:J.genesis,codehash:J.codehash,receivers:o})),re.a(e.t0),re.b("ftTransferFail_".concat(S.address,"_").concat(J.genesis,"_").concat(J.genesis)),l({error:e.t0.toString()});case 22:R(!1),t&&(console.log(ne.k(Object(b.a)({type:"ftTransferSuccess,",account:{network:N.network,address:S.address,genesis:J.genesis,codehash:J.codehash},receivers:o,txid:t},a))),re.b("ftTransferSuccess_".concat(S.address,"_").concat(t)),l({response:Object(b.a)({},a)}),h.a.success({title:"Transaction broadcast success",content:Object(ie.jsxs)("div",{children:["txid:"," ",Object(ie.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(C.h)(N.network,t),children:t})]})}));case 24:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),h.a.confirm({title:"Confirm the transaction",onOk:function(){M?u():f()}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ie.jsx)(v.a,{className:"card",title:Object(ie.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){f()},children:[Object(ie.jsx)(I.a,{}),"Transfer"]}),loading:H,bordered:!1,children:Object(ie.jsxs)(x.a,{form:E,layout:"vertical",onFinish:Y,children:[Object(ie.jsx)("div",{className:"transfer-line",children:M?"Coin: ".concat(V):"Token: ".concat(V)}),!M&&Object(ie.jsxs)("div",{className:"transfer-line",children:["Genesis: ",J.genesis]}),!M&&Object(ie.jsxs)("div",{className:"transfer-line",children:["Codehash: ",J.codehash]}),Object(ie.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ie.jsx)(g.a,{span:14,children:Object(ie.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(ie.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(Z)}),Object(ie.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(S.address)}),Object(ie.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(ie.jsx)(g.a,{span:14,children:Object(ie.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(ie.jsx)(x.a.List,{name:"receiverList",children:function(e,t){var a=t.add,n=t.remove;return Object(ie.jsxs)(ie.Fragment,{children:[e.map((function(e,t,a){for(var r=arguments.length,c=new Array(r>3?r-3:0),s=3;s<r;s++)c[s-3]=arguments[s];return Object(ie.jsxs)(k.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(ie.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},c),{},{name:[t,"address"],fieldKey:[a,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,t){return Object(C.i)(N.network,t)?Promise.resolve():Promise.reject()}}],children:Object(ie.jsx)(j.a,{placeholder:"Input the address",disabled:!W})})),Object(ie.jsx)(x.a.Item,Object(b.a)(Object(b.a)({},c),{},{name:[t,"amount"],fieldKey:[a,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(ie.jsx)(y.a,{placeholder:"Amount",min:0,disabled:!W})})),Object(ie.jsx)(p.a,{disabled:!W,size:"small",onClick:function(){return n(t)},shape:"circle",icon:Object(ie.jsx)(A.a,{})})]},e.fieldKey)})),Object(ie.jsx)(x.a.Item,{children:Object(ie.jsx)(p.a,{type:"dashed",onClick:function(){return a()},icon:Object(ie.jsx)(P.a,{}),disabled:!W,children:"Add Output"})})]})}}),Object(ie.jsx)(x.a.Item,{children:Object(ie.jsx)(p.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}var xe=function(){Object(s.useEffect)((function(){X(M())}),[]);var e=Object(s.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(u.a)(r,2),i=c[0],o=c[1],d=q("account"),f=Object(u.a)(d,1)[0],l=q("key"),p=Object(u.a)(l,1)[0],j=q("bsvBalance"),x=Object(u.a)(j,1)[0],v=q("sensibleFtList"),m=Object(u.a)(v,1)[0],g=Object(s.useState)([]),O=Object(u.a)(g,2),w=O[0],k=O[1],y=Object(s.useState)([]),S=Object(u.a)(y,2),T=S[0],I=S[1],A=Object(s.useState)([]),P=Object(u.a)(A,2),F=P[0],K=P[1],C=function(){n(!1),o("")},B=function(){if(!window.opener)return null;var e=window.location.hash.substr(1);try{var t=JSON.parse(decodeURIComponent(e));if("popup"===t.type&&"object"===typeof t.data)return t}catch(a){}return null},L=function(e){var t=B();t&&N(window.opener,"*").emit(t.id,{type:"response",data:Object(b.a)(Object(b.a)({},t.data.data),e)})},_=(null===p||void 0===p?void 0:p.address)&&(null===f||void 0===f?void 0:f.network),E=_&&x&&ne.e(x.balance,0);return ae((function(){var e=B();if(e&&"request"===e.data.type){var t=e.data.data,a=t.method,n=t.params;"requestAccount"===a&&h.a.confirm({title:"Connect",content:Object(ie.jsxs)("div",{children:["Allow ",Object(ie.jsx)("b",{children:n.name})," to connect your web wallet"]}),onOk:function(){L({response:!0})},onCancel:function(){L({error:"user reject"})}})}}),!!_),ae((function(){var e=B();if(console.log("bsv hash data",e),e&&"request"===e.data.type){var t=e.data.data,a=t.method,r=t.params;if("transferBsv"===a){var c=r.receivers.reduce((function(e,t){return ne.j(e,t.amount)}),0);ne.d(c,x.balance)?L({error:"insufficient bsv balance"}):(n(!0),k(r.receivers))}}}),!!E),ae((function(){var e=B();if(console.log("hashdata",e),e&&"request"===e.data.type){var t=e.data.data,a=t.method,r=t.params;if("transferSensibleFt"===a){var c=r.receivers.reduce((function(e,t){return ne.j(e,t.amount)}),0);console.log("outputTotal",c);var s=m.find((function(e){return e.genesis===r.genesis}));console.log("ft",s),s?ne.d(c,s.balance)?L({error:"insufficient ft balance"}):(n(!0),o(r.genesis),k(r.receivers),K(r.rabinApis)):L({error:"insufficient ft balance"})}}}),!!E),ae((function(){var e=B();if(console.log("bsv hash data",e),e&&"request"===e.data.type){var t=e.data.data,a=t.method,r=t.params;"transferAll"===a&&r.datas.forEach((function(e){var t=!e.genesis,a=m.find((function(t){return t.genesis===e.genesis})),c=e.receivers.reduce((function(e,t){return ne.j(e,t.amount)}),0);t&&ne.d(c,x.balance)?L({error:"insufficient bsv balance"}):a&&ne.d(c,a.balance)?L({error:"insufficient ft balance"}):(n(!0),I(r.datas))}))}}),!!E),Object(s.useEffect)((function(){var e=window.onbeforeunload;window.onbeforeunload=function(t){return L({error:"use closed"}),e&&e(t)}})),Object(ie.jsxs)("div",{className:"App",style:{overflow:"hidden"},children:[Object(ie.jsx)(de,{accountName:"harry"}),Object(ie.jsx)(be,{}),!a&&Object(ie.jsx)(ue,{onTransfer:function(e){n(!0),e&&o(e)}}),a&&(!T||T.length<1?Object(ie.jsx)(je,{genesis:i,rabinApis:F,onCancel:C,onTransferCallback:L,initReceivers:w}):Object(ie.jsx)(he,{onCancel:C,onTransferCallback:L,initDatas:T}))]})},ve=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,906)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},me=a(894),ge=a(482);!function(){var e=H.SensibleApi.prototype.broadcast;H.SensibleApi.prototype.broadcast=function(){var t=Object(c.a)(r.a.mark((function t(a){var n,c,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new K.bsv.Transaction(a).hash,c="txid: ".concat(n,"; rawtx: ").concat(a),console.log("sensible-sdk \u5e7f\u64ad",c),t.prev=3,t.next=6,e.call(this,a);case 6:return s=t.sent,t.abrupt("return",s);case 10:throw t.prev=10,t.t0=t.catch(3),console.log("sensible-sdk \u5e7f\u64ad\u9519\u8bef",c),i=new Error("".concat(t.t0.message," sensible-sdk \u5e7f\u64ad\u9519\u8bef ").concat(c)),setTimeout((function(){throw i}),0),t.t0;case 16:case"end":return t.stop()}}),t,this,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}();var Oe=window===window.top;me.a({dsn:"https://d223c2a1d1bf44b6a657051ac9a99b16@o877284.ingest.sentry.io/5827823",integrations:[new ge.a.BrowserTracing],tracesSampleRate:1}),Oe?d.a.render(Object(ie.jsx)(i.a.StrictMode,{children:Object(ie.jsx)(xe,{})}),document.getElementById("root")):function(){te.apply(this,arguments)}(),function(){var e=window.onbeforeunload;window.onbeforeunload=function(t){return!!window.opener||X(null),e&&e(t)}}(),ve()}},[[888,1,2]]]);
//# sourceMappingURL=main.cdec988c.chunk.js.map