(this["webpackJsonpbsv-web-wallet"]=this["webpackJsonpbsv-web-wallet"]||[]).push([[0],{111:function(e,a,t){"use strict";var c;t.d(a,"a",(function(){return c})),function(e){e.Testnet="testnet",e.Mainnet="mainnet",e.STN="STN"}(c||(c={}))},12:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"i",(function(){return d})),t.d(a,"j",(function(){return b})),t.d(a,"h",(function(){return f})),t.d(a,"c",(function(){return o})),t.d(a,"f",(function(){return i})),t.d(a,"g",(function(){return u})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return p})),t.d(a,"l",(function(){return h})),t.d(a,"a",(function(){return x})),t.d(a,"k",(function(){return v}));var c=t(46),n=t.n(c),r=t(318);function s(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.div(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function d(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.multipliedBy(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function b(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.plus(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function f(e){for(var a=new n.a(e),t=0;t<(arguments.length<=1?0:arguments.length-1);t++)a=a.minus(new n.a(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]));return a.toString()}function o(e){return new n.a(10).pow(e).toString()}function i(e,a){return new n.a(e).lt(new n.a(a))}function u(e,a){return new n.a(e).lte(new n.a(a))}function l(e,a){return new n.a(e).gt(new n.a(a))}function p(e,a){return new n.a(e).gte(new n.a(a))}function h(e){return new n.a(e).toString()}function x(e,a){a=a||.5;var t=e.toBuffer().length,c=e.getFee()/t;if(c<a){var n="The fee rate should not be less than ".concat(a,", but in the end it is ").concat(c);throw r.b.error(n),new Error(n)}}function v(e){return JSON.parse(JSON.stringify(e,(function(e,a){return"bigint"===typeof a?a.toString():a})))}},32:function(e,a,t){"use strict";(function(e){t.d(a,"b",(function(){return m})),t.d(a,"i",(function(){return g})),t.d(a,"c",(function(){return O})),t.d(a,"f",(function(){return w})),t.d(a,"g",(function(){return k})),t.d(a,"h",(function(){return y})),t.d(a,"k",(function(){return S})),t.d(a,"e",(function(){return P})),t.d(a,"d",(function(){return F})),t.d(a,"a",(function(){return L})),t.d(a,"m",(function(){return R})),t.d(a,"l",(function(){return V})),t.d(a,"j",(function(){return Q}));var c=t(317),n=t(10),r=t.n(n),s=t(31),d=t(24),b=t(25),f=t(111),o=t(109),i=t.n(o),u=t(100),l=t(12),p=t(65),h=t(475);function x(e){var a=e===f.a.Mainnet?"":"/test";return"https://api.sensiblequery.com".concat(a)}function v(e){return 0===e.code&&"ok"===e.msg}function j(e){return new Promise((function(a){return setTimeout(a,e)}))}function m(e,a){return l.b(e,l.c(a))}function g(e,a){try{return new b.bsv.Address(a,e),!0}catch(t){return!1}}function O(a,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a.Testnet,n=a;n+="|"+t+"|",n+=n.length+"|!@"+7*(7*t.length+a.length);var r=t.match(/[a-z]+/g)?t.match(/[a-z]+/g).length:1,s=t.match(/[A-Z]+/g)?t.match(/[A-Z]+/g).length:1,d=t.match(/[0-9]+/g)?t.match(/[0-9]+/g).length:1;n+=(d+r+s)*t.length+"3571",n+=n+""+n;var o=e.from(n);o=b.bsv.crypto.Hash.sha256(o);for(var i=0;i<=49;i++){var u=e.from(o.toString("hex"));o=b.bsv.crypto.Hash.sha256(u)}var l=b.bsv.crypto.Hash.sha256(e.from(o.toString("hex"))).toString("hex"),p=new b.bsv.PrivateKey(l,c),h=p.toAddress(c).toString();return{address:h,privateKey:p.toString(),publicKey:p.toPublicKey().toString()}}function w(e,a,t,c){var n=e===f.a.Mainnet?"":"/test";return"https://sensiblequery.com".concat(n,"/#/ft/utxo/").concat(c,"/").concat(t,"/").concat(a)}function k(e,a){var t="";return e===f.a.Mainnet&&(t="https://whatsonchain.com/address/"),e===f.a.Testnet&&(t="https://test.whatsonchain.com/address/"),t?t+=a:t}function y(e,a){var t="";return e===f.a.Mainnet&&(t="https://whatsonchain.com/tx/"),e===f.a.Testnet&&(t="https://test.whatsonchain.com/tx/"),t?t+=a:t}function S(e){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(r.a.mark((function a(t){var c,n,s,d,f,o,i,u,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=t.txHex,n=t.scriptHex,s=t.inputIndex,d=t.privateKey,f=t.publicKey,o=t.satoshis,i=new b.bsv.Transaction(c),u=b.bsv.Script.fromBuffer(e.from(n,"hex")),l=Object(b.toHex)(Object(b.signTx)(i,d,u.toASM(),Number(o),s)),a.abrupt("return",{publicKey:f.toString(),sig:l});case 5:case"end":return a.stop()}}),a)})))).apply(this,arguments)}function P(e,a){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(r.a.mark((function e(a,t){var n,s,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],s=20,e.prev=2,d=1;case 4:return e.next=6,A(a,t,d,s);case 6:if(b=e.sent,n=[].concat(Object(c.a)(n),Object(c.a)(b)),!(b.length<s)){e.next=10;break}return e.abrupt("break",13);case 10:d++,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("getAddressSensibleFtList error"),console.error(e.t0);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function A(e,a,t){return K.apply(this,arguments)}function K(){return(K=Object(d.a)(r.a.mark((function e(a,t,c){var n,s,d,b,f=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>3&&void 0!==f[3]?f[3]:20,s=x(a),e.next=4,i.a.get("".concat(s,"/ft/summary/").concat(t,"?cursor=").concat((c-1)*n,"&size=").concat(n));case 4:if(d=e.sent,b=d.data,!v(b)){e.next=9;break}return e.abrupt("return",(b.data||[]).map((function(e){return{genesis:e.genesis,codehash:e.codehash,tokenName:e.name,tokenSymbol:e.symbol,tokenDecimal:e.decimal,balance:l.j(e.balance,e.pendingBalance)}})));case 9:throw new Error(b.msg);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,a,t){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(r.a.mark((function e(a,t,c){var n,s,d,b,f,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>3&&void 0!==o[3]?o[3]:16,s=(c-1)*n,d=x(a),e.next=5,i.a.get("".concat(d,"/address/").concat(t,"/utxo?cursor=").concat(s,"&size=").concat(n));case 5:if(b=e.sent,f=b.data,!v(f)){e.next=10;break}return e.abrupt("return",(f.data||[]).map((function(e){return{txId:e.txid,outputIndex:e.vout,satoshis:e.satoshi,address:t}})));case 10:throw new Error(f.msg);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,a){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(r.a.mark((function e(a,t){var c,n,s,d,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=1,n=16,s="0";case 3:return e.next=5,C(a,t,c,n);case 5:if(d=e.sent,b=d.reduce((function(e,a){return l.j(e,a.satoshis)}),"0"),s=l.j(s,b),!(d.length<n)){e.next=10;break}return e.abrupt("break",13);case 10:c++;case 11:e.next=3;break;case 13:return console.log("balance",s),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,a){return _.apply(this,arguments)}function _(){return(_=Object(d.a)(r.a.mark((function e(a,t){var c,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=x(a),console.log("sensible \u4ea4\u6613\u5e7f\u64ad",a,t),e.next=4,i.a.post("".concat(c,"/pushtx"),{txHex:t});case 4:if(n=e.sent,s=n.data,!v(s)){e.next=9;break}return e.abrupt("return",new b.bsv.Transaction(t).hash);case 9:throw new Error(s.msg);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(e){return"Insufficient balance."===e.message?new Error("Low bsv balance to pay miners"):e},E=function(e,a){var t=h.find((function(t){return t.codehash===e&&t.genesis===a}));return t?t.satotxList:[]},H=function(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];for(var c=0,n=a;c<n.length;c++){var r=n[c];if(r&&r.length>0)return r}return[]};function R(e,a,t,c,n,r){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(r.a.mark((function e(a,t,c,n,s,d){var b,f,o,i,p,h,x,v,m,g,O,w,k,y,S,T,P,I,A,K,C,B,F,N,L,_,R,q=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=q.length>6&&void 0!==q[6]&&q[6],f=q.length>7&&void 0!==q[7]&&q[7],o=E(s,d),t=H(t,o),console.log("signers",t),!(t&&t.length>0)){e.next=11;break}return e.next=8,u.SensibleFT.selectSigners(t);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,u.SensibleFT.selectSigners();case 13:e.t0=e.sent;case 14:return i=e.t0,p=new u.SensibleFT({network:a,purse:c,feeb:.5,signerSelecteds:i.signerSelecteds,signers:i.signers}),console.log("transferSensibleFt",n,a,s,d,t),e.prev=17,e.next=20,p.transfer({senderWif:c,receivers:n,codehash:s,genesis:d,utxos:b,noBroadcast:f});case 20:if(h=e.sent,x=h.txid,v=h.tx,m=h.routeCheckTx,!0!==f){e.next=26;break}return e.abrupt("return",{tx:v,routeCheckTx:m});case 26:return l.a(v),g=Q(a,v.serialize(!0)),e.abrupt("return",{txid:x,outputs:g.outputs});case 31:if(e.prev=31,e.t1=e.catch(17),O=z(e.t1),w=O.toString(),k=w.indexOf("Bsv utxos should be no more than 3 in ")>0,y=w.indexOf("Too many token-utxos")>0,console.log("broadcast sensible ft error"),console.error(O),k||y){e.next=41;break}throw O;case 41:if(!k){e.next=74;break}return e.prev=42,e.next=45,U(a,c);case 45:return e.next=47,j(3e3);case 47:e.next=54;break;case 49:throw e.prev=49,e.t2=e.catch(42),console.log("merge bsv utxo fail"),console.error(e.t2),e.t2;case 54:return e.prev=54,e.next=57,p.transfer({senderWif:c,receivers:n,codehash:s,genesis:d});case 57:return S=e.sent,T=S.txid,P=S.tx,l.a(P),I=Q(a,P.serialize(!0)),e.abrupt("return",{txid:T,outputs:I.outputs});case 65:if(e.prev=65,e.t3=e.catch(54),A=z(e.t3),console.log("ft transfer fail after bsv utxo merge"),console.error(A),K=A.toString(),y=K.indexOf("Too many token-utxos")>0){e.next=74;break}throw A;case 74:if(!y){e.next=107;break}return e.prev=75,e.next=78,p.merge({ownerWif:c,codehash:s,genesis:d});case 78:return C=e.sent,B=C.tx,l.a(B),e.next=83,j(3e3);case 83:e.next=90;break;case 85:throw e.prev=85,e.t4=e.catch(75),console.log("merge ft utxo fail"),console.error(e.t4),e.t4;case 90:return e.prev=90,e.next=93,p.transfer({senderWif:c,receivers:n,codehash:s,genesis:d});case 93:return F=e.sent,N=F.txid,L=F.tx,l.a(L),_=Q(a,L.serialize(!0)),e.abrupt("return",{txid:N,outputs:_.outputs});case 101:throw e.prev=101,e.t5=e.catch(90),R=z(e.t5),console.log("ft transfer fail after ft utxo merge"),console.error(R),R;case 107:case"end":return e.stop()}}),e,null,[[17,31],[42,49],[54,65],[75,85],[90,101]])})))).apply(this,arguments)}var D=b.bsv.crypto.Signature,W=D.SIGHASH_ALL|D.SIGHASH_FORKID;function M(e,a,t,c){var n=new b.bsv.Transaction.Signature({publicKey:e.publicKey,prevTxId:a.inputs[t].prevTxId,outputIndex:a.inputs[t].outputIndex,inputIndex:t,signature:b.bsv.Transaction.Sighash.sign(a,e,c,t,a.inputs[t].output.script,a.inputs[t].output.satoshisBN),sigtype:c});a.inputs[t].setScript(b.bsv.Script.buildPublicKeyHashIn(n.publicKey,n.signature.toDER(),n.sigtype))}function J(e,a,t){var c=!0,n={},r=function(e,a){return"".concat(e,"_").concat(l.l(a))};a.outputs.forEach((function(e){var a=e.script.toAddress(t),c=e.satoshis,s=r(a,c);n[s]=(n[s]||0)+1}));for(var s=0;s<e.length;s++){var d=e[s],b=r(d.address,d.amount);if(!n[b]){c=!1;break}n[b]=n[b]-1}return c}function V(e,a,t){return G.apply(this,arguments)}function G(){return(G=Object(d.a)(r.a.mark((function e(a,t,c){var n,s,d,f,o,i,u,h,x,v,j,m,g,O,w,k,y=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y.length>3&&void 0!==y[3]&&y[3],s=y.length>4&&void 0!==y[4]&&y[4],console.log("arguments",a,t,c),d=new b.bsv.PrivateKey(t,a).toAddress(a),e.next=6,F(a,d);case 6:if(f=e.sent,o=c.reduce((function(e,a){return l.j(e,a.amount)}),"0"),!l.f(f,o)){e.next=10;break}throw new Error("Insufficient_bsv_Balance");case 10:i="0",u=[],(h=new b.bsv.Transaction).feePerKb(500),x=456,v=16,j=1;case 17:return e.next=19,C(a,d,j,v);case 19:m=e.sent,g=0;case 21:if(!(g<m.length)){e.next=31;break}if(O=m[g],i=l.j(i,O.satoshis),u.push(O),h.addInput(new b.bsv.Transaction.Input.PublicKeyHash({output:new b.bsv.Transaction.Output({script:b.bsv.Script.buildPublicKeyHashOut(O.address),satoshis:O.satoshis}),prevTxId:O.txId,outputIndex:O.outputIndex,script:b.bsv.Script.empty()})),s||!l.g(l.j(o,x),i)){e.next=28;break}return e.abrupt("break",31);case 28:g++,e.next=21;break;case 31:if(s||!l.g(l.j(o,x),i)){e.next=33;break}return e.abrupt("break",38);case 33:if(!(m.length<=v)){e.next=35;break}return e.abrupt("break",38);case 35:j++,e.next=17;break;case 38:if(c.forEach((function(e){h.to(e.address,+e.amount)})),l.d(l.h(i,+o),0)&&h.change(d),l.f(l.h(i,h.getFee(),o),x)&&(h.clearOutputs(),c.forEach((function(e,a){c.length===a+1?h.change(e.address):h.to(e.address,+e.amount)}))),h.inputs.forEach((function(e,a){M(new b.bsv.PrivateKey(t),h,a,W)})),l.a(h),!0!==n){e.next=45;break}return e.abrupt("return",h);case 45:return e.next=47,L(a,h.serialize());case 47:return w=e.sent,k=Q(a,h.serialize(!0)),J(c,h,a)||(console.log(l.k({type:"bsvTransferAmountNotSatified",txid:h.hash,receivers:c,outputs:k.outputs})),p.b("bsvTransferAmountNotSatified_".concat(d,"_").concat(h.hash))),e.abrupt("return",{txid:w,outputs:k.outputs,fee:h.getFee()});case 52:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(d.a)(r.a.mark((function e(a,t){var c,n,s,d,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new b.bsv.PrivateKey(t,a).toAddress(a),e.next=3,C(a,c,1);case 3:return n=e.sent,(s=new b.bsv.Transaction).feePerKb(500),n.forEach((function(e){s.addInput(new b.bsv.Transaction.Input.PublicKeyHash({output:new b.bsv.Transaction.Output({script:b.bsv.Script.buildPublicKeyHashOut(e.address),satoshis:e.satoshis}),prevTxId:e.txId,outputIndex:e.outputIndex,script:b.bsv.Script.empty()}))})),s.change(c),s.inputs.forEach((function(e,a){M(new b.bsv.PrivateKey(t),s,a,W)})),l.a(s),e.next=12,L(a,s.serialize());case 12:return d=e.sent,f=Q(a,s.serialize(!0)),e.abrupt("return",{txid:d,outputs:f.outputs});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mainnet",t=u.SensibleFT.parseTokenScript(e,a);return t};function Q(e,a){var t;try{t=new b.bsv.Transaction(a)}catch(c){return{error:c.message}}return{inputs:t.inputs.map((function(a,t){var n=Z(a.script.toBuffer(),e),r={index:t,prevTxId:a.prevTxId.toString("hex"),outputIndex:a.outputIndex,script:a.script.toString("hex")};try{var d=a.script.toAddress(e);d&&(r.address=d.toString())}catch(c){}return n?n.tokenAmount<=0?r:r=Object(s.a)(Object(s.a)({},r),{},{isFt:!0,ftDetail:{genesis:n.genesis,codehash:n.codehash,address:n.tokenAddress,decimal:n.decimalNum,name:n.tokenName,symbol:n.tokenSymbol}}):r})),outputs:t.outputs.map((function(a,t){var n=Z(a.script.toBuffer(),e),r={index:t,satoshis:a.satoshis,script:a.script.toString("hex")};try{var d=a.script.toAddress(e);d&&(r.address=d.toString())}catch(c){}return n?n.tokenAmount<=0?r:r=Object(s.a)(Object(s.a)({},r),{},{isFt:!0,ftDetail:{genesis:n.genesis,codehash:n.codehash,address:n.tokenAddress,decimal:n.decimalNum,name:n.tokenName,symbol:n.tokenSymbol,amount:n.tokenAmount}}):r})),txid:t.hash}}window.transferBsv=V,window.signAnyTx=S}).call(this,t(8).Buffer)},335:function(e,a){},417:function(e,a){},475:function(e){e.exports=JSON.parse('[{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"d486f42fd4930c964f6840a2997b0ef9b3abc38d","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"514776383faa66e4a65808904d4d6724e4774fbe","genesis":"9757197ec84183cd39e2239e56c8cc04fce9f9cd","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"777e4dd291059c9f7a0fd563f7204576dcceb791","genesis":"54256eb1b9c815a37c4af1b82791ec6bdf5b3fa3","name":"mc","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]},{"codehash":"777e4dd291059c9f7a0fd563f7204576dcceb791","genesis":"8764ede9fa7bf81ba1eec5e1312cf67117d47930","name":"mc-lp","satotxList":[{"satotxApiPrefix":"https://satotx.showpay.top","satotxPubKey":"5b94858991d384c61ffd97174e895fcd4f62e4fea618916dc095fe4c149bbdf1188c9b33bc15cbe963a63b2522e70b80a5b722ac0e6180407917403755df4de27d69cc115c683a99face8c823cbccf73c7f0d546f1300b9ee2e96aea85542527f33b649f1885caebe19cf75d9a645807f03565c65bd4c99c8f6bb000644cfb56969eac3e9331c254b08aa279ceb64c47ef66be3f071e28b3a5a21e48cdfc3335d8b52e80a09a104a791ace6a2c1b4da88c52f9cc28c54a324e126ec91a988c1fe4e21afc8a84d0e876e01502386f74e7fc24fc32aa249075dd222361aea119d4824db2a797d58886e93bdd60556e504bb190b76a451a4e7b0431973c0410e71e808d0962415503931bbde3dfce5186b371c5bf729861f239ef626b7217d071dfd62bac877a847f2ac2dca07597a0bb9dc1969bed40606c025c4ff7b53a4a6bd921642199c16ede8165ed28da161739fa8d33f9f483212759498c1219d246092d14c9ae63808f58f03c8ca746904ba51fa326d793cea80cda411c85d35894bdb5"},{"satotxApiPrefix":"https://satotx2.showpay.top","satotxPubKey":"09539fcf01e83c7c649164ddd0dd42463ef10a98c665cd0d9f791446a3c4c2dd3916f6e76075b36a06f40731821f6b7dbb8bea8effa4ea461fecce4b6b2d45ca4dd923028fd6dc6ce49512616ca55f01162e5d2f85faa22ec40bc35d4978204a9b07a53f04297b886fa4abb095034f106f8ff0fd172e1e96bf7198cd5b9944ec1af32328a156877769ecabd41489a7ac858fd35cd8d93e68f33053077cf50bb397b66d160598963d1b663b3bce6371877df0e33866e4d9557b0bde7a2a930c274fa9e697d9f17ad88528ecab1be32a9d518bb950fc8264f2056d4f395fcdc12dd59cb8945013105ed52433326e3fa067237f17ab62e65557c7538e634daf11288b7eaab537abf2cc2a90159632fb9bb8fac01085b70024e01e42cd431db70d004963e46da8733c18fd5ffaaecfd67c860ae37441271ba545f86cae72690a5a3261e0125a2bf069fe28a1e1431b4cac29f8a43cbefbe22d5ae4b92441f8915881560271ee31379d365da38f1a5fa1414d6ad71943a083cce0ee45d47f81ff3c9d"},{"satotxApiPrefix":"https://satotx3.showpay.top","satotxPubKey":"8e37df222f9af47980ad72d31b2619b49460c7be3a4c1034c0e7f43146d80058e52bfc53b0608db5a9ec5cb832c326f785f5c4e4349cc9fd647839738f465573d1707ef84d14c41ad857a1a8e5a075ae953be4c52481ee3b8e85891613dcf99c1f7bf3a51cd67ed92f9b71d77b8517a57af5fb4e2bad7197031e00c1d8b85d0abc62fb98952d9ddfb43b47c01590ef0a365aed89b179505ccfd1d70effe4d375d5e774578434f8f9bb2281100b6e1daf8df4a40af35853c91aee2dc7f578034fa534586985e4df30b7a85efab943f68f01b46f72ced16655ac4f7e7f0439e0e6b43803dc7e262512c57ef862d41b98344ea6e725683846d91209ad87097cb4ae7092cc2c4ebd39383905e61eeaae495d8b3a57f9da8cca760b9546635cef2a8728c4209891ad1e5cbeb75d2b798f0dabd1eceaf4b297186fd2a45ed58fbaed886a4dc2f8690c9070061b9481e446319b7f0a54f9d94e7505e87e3d81bcd664ecc29acc2942361e60b30fa965cdc88185163c2857644d837c9d839bb9f6b8e6dd"},{"satotxApiPrefix":"https://s1.satoplay.com","satotxPubKey":"2c8c0117aa5edba9a4539e783b6a1bdbc1ad88ad5b57f3d9c5cba55001c45e1fedb877ebc7d49d1cfa8aa938ccb303c3a37732eb0296fee4a6642b0ff1976817b603404f64c41ec098f8cd908caf64b4a3aada220ff61e252ef6d775079b69451367eda8fdb37bc55c8bfd69610e1f31b9d421ff44e3a0cfa7b11f334374827256a0b91ce80c45ffb798798e7bd6b110134e1a3c3fa89855a19829aab3922f55da92000495737e99e0094e6c4dbcc4e8d8de5459355c21ff055d039a202076e4ca263b745a885ef292eec0b5a5255e6ecc45534897d9572c3ebe97d36626c7b1e775159e00b17d03bc6d127260e13a252afd89bab72e8daf893075f18c1840cb394f18a9817913a9462c6ffc8951bee50a05f38da4c9090a4d6868cb8c955e5efb4f3be4e7cf0be1c399d78a6f6dd26a0af8492dca67843c6da9915bae571aa9f4696418ab1520dd50dd05f5c0c7a51d2843bd4d9b6b3b79910e98f3d98099fd86d71b2fac290e32bdacb31943a8384a7668c32a66be127b74390b4b0dec6455"},{"satotxApiPrefix":"https://satotx.metasv.com","satotxPubKey":"19d9193ee2e95d09445d28408e8a3da730b2d557cd8d39a7ae4ebbfbceb17ed5d745623529ad33d043511f3e205c1f92b6322833424d19823c3b611b3adabb74e1006e0e93a8f1e0b97ab801c6060a4c060f775998d9f003568ab4ea7633a0395eb761c36106e229394f2c271b8522a44a5ae759254f5d22927923ba85b3729460ecccca07a5556299aa7f2518814c74a2a4d48b48013d609002631f2d93c906d07077ef58d473e3d971362d1129c1ab9b8f9b1365519f0c023c1cadad5ab57240d19e256e08022fd0708951ff90a8af0655aff806c6382d0a72c13f1e52b88222d7dfc6357179b06ffcf937f9da3b0419908aa589a731e26bbaba2fa0b754bf722e338c5627b11dc24aadc4d83c35851c034936cf0df18167e856a5f0a7121d23cd48b3f8a420869a37bd1362905d7f76ff18a991f75a0f9d1bcfc18416d76691cc357cbdcc8cc0df9dbd9318a40e08adb2fb4e78b3c47bdf07eeed4f3f4e0f7e81e37460a09b857e0194c72ec03bb564b5b409d8a1b84c153186ecbb4cfdfd"}]}]')},499:function(e,a,t){},522:function(e,a){},528:function(e,a){},531:function(e,a){},532:function(e,a){},554:function(e,a){},556:function(e,a){},565:function(e,a){},567:function(e,a){},593:function(e,a){},595:function(e,a){},600:function(e,a){},602:function(e,a){},608:function(e,a){},610:function(e,a){},622:function(e,a){},625:function(e,a){},664:function(e,a){},695:function(e,a){},814:function(e,a,t){},888:function(e,a,t){"use strict";t.r(a);var c=t(10),n=t.n(c),r=t(24),s=t(0),d=t.n(s),b=t(50),f=t.n(b),o=(t(499),t(31)),i=t(26),u=t(201),l=t(901),p=t(140),h=t(900),x=t(899),v=t(897),j=t(895),m=t(168),g=t(89),O=t(896),w=t(318),k=t(902),y=t(898),S=t(903),T=t(904),P=t(490),I=t(905),A=t(489),K=t(472),C=t(25),B=t(32),F=t(245),N=t(477),L={satotxApiPrefix:"https://api.satotx.com",satotxPubKey:"25108ec89eb96b99314619eb5b124f11f00307a833cda48f5ab1865a04d4cfa567095ea4dd47cdf5c7568cd8efa77805197a67943fe965b0a558216011c374aa06a7527b20b0ce9471e399fa752e8c8b72a12527768a9fc7092f1a7057c1a1514b59df4d154df0d5994ff3b386a04d819474efbd99fb10681db58b1bd857f6d5"},_={account:null,key:null,bsvBalance:null,sensibleFtList:[],satotxConfigMap:new Map};_.satotxConfigMap.set("5b3bfa8e7600d701e70551075573ea28fd16c25a39fe2bdafdc3e08b11ca76b800000000",[L,L,L]);var z=Object(N.a)(_),E=z.useGlobalState,H=z.getGlobalState,R=z.setGlobalState,q=t(100),D="accountStorageKey";function W(e){var a=e?JSON.stringify(e):"";localStorage.setItem(D,a)}function M(){var e=localStorage.getItem(D);return e?JSON.parse(e):null}function J(e){return q.SensibleFT.isSupportedToken(e)}var V=0,G=0;function U(){return Y.apply(this,arguments)}function Y(){return(Y=Object(r.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(V),a=function(){var e=Object(r.a)(n.a.mark((function e(){var a,t,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=H("account"),t=H("key"),a&&t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(B.d)(a.network,t.address);case 7:c=e.sent,R("bsvBalance",{balance:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("getAddressBsvBalance err",a.network,t.address,e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,a();case 4:V=window.setInterval(a,5e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return Q.apply(this,arguments)}function Q(){return(Q=Object(r.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(G),a=function(){var e=Object(r.a)(n.a.mark((function e(){var a,t,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=H("account"),t=H("key"),a&&t){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,Object(B.e)(a.network,t.address);case 7:c=e.sent,r=c.filter((function(e){return J(e.codehash)})),R("sensibleFtList",r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("getAddressSensibleFtList err",a.network,t.address,e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,a();case 4:G=window.setInterval(a,5e3);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return $.apply(this,arguments)}function $(){return($=Object(r.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(a),!a){e.next=10;break}return t=Object(B.c)(a.email,a.password,a.network),R("account",a),R("key",t),e.next=7,Z();case 7:U(),e.next=12;break;case 10:R("account",null),R("key",null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){return new Promise((function(a){return setTimeout(a,e)}))};function ae(){return(ae=Object(r.a)(n.a.mark((function e(){var a,t,c,s,d,b,f,i,u,l,p,h,x;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window!==window.top){e.next=2;break}return e.abrupt("return");case 2:a=JSON.parse(decodeURIComponent(window.location.hash.substr(1))),t=F(window.top,"*"),c=a.id,s=null,d=null,b=[],f=null,t.emit(c,{type:"ready"}),i=function(e,a){return!e&&!a||(null===e||void 0===e?void 0:e.balance)===(null===a||void 0===a?void 0:a.balance)},u=function(e,a){if(e.length!==a.length)return!1;e.sort((function(e,a){return e.genesis.localeCompare(a.genesis)})),a.sort((function(e,a){return e.genesis.localeCompare(a.genesis)}));for(var t=0;t<e.length;t++){var c=e[t],n=a[t];if(c.genesis!==n.genesis)return!1;if(c.balance!==n.balance)return!1}return!0},l=function(e,a){return(null===e||void 0===e?void 0:e.email)===(null===a||void 0===a?void 0:a.email)&&(null===e||void 0===e?void 0:e.network)===(null===a||void 0===a?void 0:a.network)&&(null===e||void 0===e?void 0:e.password)===(null===a||void 0===a?void 0:a.password)},p=function(){var e=Object(r.a)(n.a.mark((function e(){var a,r,o,p,h;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=M(),l(a,s)||t.emit(c,{type:"account",data:a}),!(s=a)){e.next=30;break}return f=Object(B.c)(s.email,s.password,s.network),e.prev=5,e.next=8,Object(B.d)(s.network,f.address);case 8:r=e.sent,o=i(d,{balance:r}),d={balance:r},o||t.emit(c,{type:"bsvBalance",data:d}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:return e.prev=16,e.next=19,Object(B.e)(s.network,f.address);case 19:p=e.sent,h=u(b,p),b=p,h||t.emit(c,{type:"sensibleFtBalance",data:b}),e.next=27;break;case 25:e.prev=25,e.t1=e.catch(16);case 27:return e.abrupt("return",!0);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,null,[[5,14],[16,25]])})));return function(){return e.apply(this,arguments)}}(),(h=function(e,a){t.on(c,function(){var s=Object(r.a)(n.a.mark((function r(s,d){var b,f,o,i;return n.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b=d.type,f=d.data,"request"!==b||(null===f||void 0===f?void 0:f.method)!==e){n.next=13;break}return o=f.requestId,n.prev=3,n.next=6,a(f.params);case 6:i=n.sent,t.emit(c,{type:"response",data:{requestId:o,method:e,response:i}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),t.emit(c,{type:"response",data:{requestId:o,method:e,error:n.t0.toString()}});case 13:case"end":return n.stop()}}),r,null,[[3,10]])})));return function(e,a){return s.apply(this,arguments)}}())})("getAccount",Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:if(s){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",{name:s.email,email:s.email,network:s.network});case 5:case"end":return e.stop()}}),e)})))),h("getBsvBalance",Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",d);case 3:case"end":return e.stop()}}),e)})))),h("getSensibleFtBalance",Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.abrupt("return",b);case 3:case"end":return e.stop()}}),e)})))),h("getAddress",Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:if(f){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",f.address);case 5:case"end":return e.stop()}}),e)})))),h("signTx",function(){var e=Object(r.a)(n.a.mark((function e(a){var t,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.address,f){e.next=3;break}throw new Error("not_login");case 3:if(r===f.address){e.next=5;break}throw new Error("not_my_address");case 5:return e.abrupt("return",Object(B.k)(Object(o.a)(Object(o.a)({},a),{},{privateKey:new C.bsv.PrivateKey(f.privateKey,null===(t=s)||void 0===t?void 0:t.network),publicKey:new C.bsv.PublicKey(f.publicKey,null===(c=s)||void 0===c?void 0:c.network)})));case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),h("logout",Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(null);case 1:case"end":return e.stop()}}),e)})))),h("ping",(function(){return null}));case 22:return e.next=24,p();case 24:return x=e.sent,e.next=27,ee(x?3e3:500);case 27:e.next=22;break;case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=Object(s.useRef)(!1);Object(s.useEffect)((function(){a&&!t.current&&(t.current=!0,e())}),[e,a])}t(814);var ce=t(12),ne=t(65),re=t(109),se=t.n(re),de=t(7),be=u.a.Option;function fe(){var e=E("account"),a=Object(i.a)(e,1)[0],t=E("key"),c=Object(i.a)(t,1)[0],n=Object(s.useState)(!1),r=Object(i.a)(n,2),d=r[0],b=r[1],f=Object(s.useState)(""),o=Object(i.a)(f,2),v=o[0],j=o[1],m=Object(s.useState)(""),g=Object(i.a)(m,2),O=g[0],w=g[1],k=Object(s.useState)(!1),y=Object(i.a)(k,2),S=y[0],T=y[1];return Object(de.jsxs)("div",{className:"header",children:[Object(de.jsx)("div",{className:"logo",children:"Web Wallet"}),a&&Object(de.jsx)(l.a,{title:"",content:Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(p.a,{type:"link",onClick:function(){X(null)},children:"Logout"}),Object(de.jsx)("br",{}),Object(de.jsx)(p.a,{type:"link",onClick:function(){var e=Object(B.g)(a.network,c.address);window.open(e)},children:"History"}),Object(de.jsx)("br",{}),Object(de.jsx)(p.a,{type:"link",onClick:function(){window.open("http://github.com")},children:"Source Code"}),Object(de.jsx)("br",{}),Object(de.jsx)(p.a,{type:"link",onClick:function(){return b(!0)},children:"decode rawtx"})]}),children:Object(de.jsx)(p.a,{type:"link",children:a.email})}),Object(de.jsxs)(h.a,{visible:d,onCancel:function(){return b(!1)},children:[Object(de.jsx)(x.a.TextArea,{rows:4,value:v,onChange:function(e){return j(e.target.value)}}),Object(de.jsxs)(u.a,{style:{width:180},placeholder:"Select network",value:O,onChange:function(e){return w(e)},children:[Object(de.jsx)(be,{value:"mainnet",children:"mainnet"}),Object(de.jsx)(be,{value:"testnet",children:"testnet"})]}),Object(de.jsx)(p.a,{type:"primary",onClick:function(){var e=Object(B.j)(O,v);console.log("decodeTx res",e)},children:"decode"})]}),Object(de.jsx)(h.a,{visible:S,onCancel:function(){return T(!1)}})]})}function oe(){var e=E("account"),a=Object(i.a)(e,1)[0],t=v.a.useForm(),c=Object(i.a)(t,1)[0];return a?null:Object(de.jsx)(j.a,{className:"card",title:"Login",bordered:!1,children:Object(de.jsxs)(v.a,{form:c,layout:"vertical",onFinish:function(){h.a.confirm({title:"\u5b89\u5168\u6ce8\u610f",content:Object(de.jsxs)("div",{children:["Web\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230\uff0c\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730(\u4ee3\u7801\u89c1",Object(de.jsx)("a",{href:"https://github.com/klouskingsley/bsv-web-wallet",target:"_blank",rel:"noreferrer",children:"github"}),")\u3002\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\uff0c\u6216\u5728\u4f7f\u7528\u5b8c\u6210\u4e4b\u540e\u5c06\u5269\u4f59\u8d44\u91d1\u8f6c\u79fb\u3002\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4e22\u5931(\u5fd8\u8bb0\uff0c\u88ab\u76d7\u7b49\u60c5\u5f62)\u4f1a\u5bfc\u81f4\u8d44\u4ea7\u4e22\u5931"]}),onOk:function(){X(c.getFieldsValue())}})},children:[Object(de.jsx)(v.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input a valid Email!"}],children:Object(de.jsx)(x.a,{prefix:Object(de.jsx)(S.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(de.jsx)(v.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{min:6,message:"Password at least 6 chars",transform:function(e){return e&&e.trim()}}],children:Object(de.jsx)(x.a.Password,{prefix:Object(de.jsx)(T.a,{className:"site-form-item-icon"}),type:"password",visibilityToggle:!0,placeholder:"Password"})}),Object(de.jsx)(v.a.Item,{name:"network",label:"Network",rules:[{required:!0}],children:Object(de.jsxs)(u.a,{placeholder:"Select network",children:[Object(de.jsx)(be,{value:"mainnet",children:"mainnet"}),Object(de.jsx)(be,{value:"testnet",children:"testnet"})]})}),Object(de.jsx)(v.a.Item,{children:"\u8bf4\u660e\uff1aWeb\u94b1\u5305\u7684\u79c1\u94a5\u662f\u901a\u8fc7\u7528\u6237\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u5b9e\u65f6\u8ba1\u7b97\u5f97\u5230(\u65e0\u9700\u6ce8\u518c)\uff0c\u6bcf\u6b21\u8f93\u5165\u76f8\u540c\u7684\u90ae\u7bb1\u548c\u5bc6\u7801\u767b\u5f55\u5373\u53ef\u8ba1\u7b97\u51fa\u76f8\u540c\u7684\u79c1\u94a5\uff0c\u79c1\u94a5\u4e0d\u4f1a\u4e0a\u4f20\u670d\u52a1\u5668\uff0c\u4e5f\u4e0d\u4f1a\u4fdd\u5b58\u5728\u672c\u5730\uff0c\u4ec5\u4f9b\u65b9\u4fbf\u7528\u6237\u6d4b\u8bd5\u4e4b\u7528\uff0c\u4e0d\u9002\u5408\u5b58\u653e\u5927\u91cf\u8d44\u91d1\uff0c\u5efa\u8bae\u7528\u6237\u59a5\u5584\u4fdd\u7ba1\u90ae\u7bb1+\u5bc6\u7801\u7ec4\u5408\u4ee5\u9632\u8d44\u91d1\u4e22\u5931\u3002"}),Object(de.jsx)(v.a.Item,{children:Object(de.jsx)(p.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})})}function ie(e){var a=e.onWithDraw,t=e.onTransfer,c=E("key"),n=Object(i.a)(c,1)[0],r=E("account"),s=Object(i.a)(r,1)[0],d=E("bsvBalance"),b=Object(i.a)(d,1)[0],f=E("sensibleFtList"),o=Object(i.a)(f,1)[0];if(!n||!s)return null;var u=function(e){return t(e||"")};return[Object(de.jsx)(j.a,{className:"card",title:"Account Info",bordered:!1,actions:Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(p.a,{type:"link",onClick:function(){var e=Object(B.g)(s.network,n.address);window.open(e)},children:"history"}),",",Object(de.jsx)(p.a,{type:"link",onClick:a,children:"withdraw"}),","]}),children:Object(de.jsxs)(v.a,{layout:"vertical",children:[Object(de.jsxs)(v.a.Item,{label:"".concat(s.network," address"),children:[Object(de.jsx)(x.a,{value:n.address}),Object(de.jsx)("div",{style:{margin:20},children:Object(de.jsx)(K,{value:n.address})})]}),Object(de.jsx)(v.a.Item,{label:"privateKey",children:Object(de.jsx)(x.a.Password,{visibilityToggle:!0,value:n.privateKey})})]})}),Object(de.jsx)(j.a,{className:"card",title:"Asset",bordered:!1,children:Object(de.jsxs)(v.a,{layout:"vertical",children:[b&&Object(de.jsx)(v.a.Item,{label:"BSV balance",children:Object(de.jsxs)(m.a,{justify:"space-between",children:[Object(de.jsx)(g.a,{span:16,children:Object(de.jsx)("div",{children:Object(B.b)(b.balance,8)})}),Object(de.jsx)(g.a,{span:7,children:Object(de.jsx)(p.a,{type:"link",onClick:function(){return u("")},children:"Transfer BSV"})})]})}),o.length>0&&Object(de.jsx)(v.a.Item,{label:"Sensible Fungible Token",children:Object(de.jsx)(O.b,{itemLayout:"horizontal",dataSource:o,renderItem:function(e){return Object(de.jsxs)(O.b.Item,{actions:Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(l.a,{placement:"topRight",content:Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)("div",{children:["codehash: ",e.codehash]}),",",Object(de.jsxs)("div",{children:["genesis: ",e.genesis]}),","]}),children:Object(de.jsx)("a",{href:Object(B.f)(s.network,n.address,e.genesis,e.codehash),rel:"noreferrer",target:"_blank",children:"more info"},"list-loadmore-more")})}),children:[Object(de.jsx)(O.b.Item.Meta,{title:e.tokenSymbol,description:e.tokenName}),Object(de.jsxs)(m.a,{children:[Object(de.jsx)(g.a,{children:Object(de.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center"},children:["Balance:"," ",Object(B.b)(e.balance,e.tokenDecimal)]})}),Object(de.jsx)(g.a,{children:Object(de.jsx)(p.a,{type:"link",onClick:function(){return u(e.genesis)},children:"Go Transfer"})})]})]},e.genesis)}})})]})})]}function ue(e){return se.a.get(e)}function le(){return pe.apply(this,arguments)}function pe(){return(pe=Object(r.a)(n.a.mark((function e(){var a,t,c,r=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:[],t=[],c=[],a.forEach((function(e){t.push(ue(e))})),e.abrupt("return",new Promise((function(e){se.a.all(t).then((function(t){t.forEach((function(e,t){c.push({satotxApiPrefix:a[t],satotxPubKey:e.data.data.pubKey})})),e(c)}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var a=e.initDatas,t=void 0===a?[]:a,c=e.onCancel,d=e.onTransferCallback,b=E("key"),f=Object(i.a)(b,1)[0],u=E("bsvBalance"),l=Object(i.a)(u,1)[0],O=E("account"),S=Object(i.a)(O,1)[0],T=E("sensibleFtList"),K=Object(i.a)(T,1)[0],F=v.a.useForm(),N=Object(i.a)(F,1)[0],L=Object(s.useState)(!1),_=Object(i.a)(L,2),z=_[0],H=_[1];if(te((function(){var e={};t.forEach((function(a,t){var c=!a.genesis,n=K.find((function(e){return e.genesis===a.genesis})),r=c?8:n.tokenDecimal;e["receiverList".concat(t)]=a.receivers.map((function(e){return{address:e.address,amount:ce.b(e.amount,ce.c(r))}}))})),N.setFieldsValue(e)}),f&&l),!f)return null;if(!l)return null;var R=function(){var e=Object(r.a)(n.a.mark((function e(){var a,c,s,b;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=N.getFieldsValue(),c=function(){var e=Object(r.a)(n.a.mark((function e(a){var t,c,r,s,b,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.formatReceiverList,c=a.noBroadcast,H(!0),s="",e.prev=3,!0!==c){e.next=10;break}return!0,e.next=8,Object(B.l)(S.network,f.privateKey,t,c,true);case 8:return b=e.sent,e.abrupt("return",b);case 10:return e.next=12,Object(B.l)(S.network,f.privateKey,t);case 12:o=e.sent,r=o,s=o.txid,e.next=26;break;case 17:e.prev=17,e.t0=e.catch(3),i="broadcast error: "+e.t0.toString(),ne.a(e.t0),ne.b("bsvTransferFail_".concat(f.address)),d({error:i}),console.log("broadcast bsv error "),console.error(e.t0),w.b.error(e.t0.toString());case 26:return ne.b("bsvTransferSuccess_".concat(f.address,"_").concat(s)),e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(r.a)(n.a.mark((function e(a){var t,c,r,s,b,o,i,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.formatReceiverList,c=a.token,a.decimal,a.genesis,r=a.rabinApis,s=a.utxos,b=a.noBroadcast,H(!0),e.prev=2,e.next=5,le(r);case 5:return i=e.sent,e.next=8,Object(B.m)(S.network,i,f.privateKey,t,c.codehash,c.genesis,s,b||!1);case 8:u=e.sent,o=u,e.next=20;break;case 12:e.prev=12,e.t0=e.catch(2),ne.a(e.t0),ne.b("ftTransferFail_".concat(f.address,"_").concat(c.genesis,"_").concat(c.genesis)),d({error:"broadcast sensible ft error, "+e.t0.toString()}),console.log("broadcast sensible ft error "),console.error(e.t0),w.b.error(e.t0.toString());case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(a){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(n.a.mark((function e(){var r,b,i,u,p,h,x,v,j,m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],b=[],i=[],u=n.a.mark((function e(b){var o,u,p,h,x,v,j,m,g,O,k,y,T,P,I,A,B,F,N;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t[b],u=!o.genesis,p=K.find((function(e){return e.genesis===o.genesis})),h=u?8:p.tokenDecimal,x=u?l.balance:p.balance,v=o.rabinApis,j=a["receiverList".concat(b)].reduce((function(e,a){return ce.j(e,a.amount)}),0),m=ce.i(j,ce.c(h)),!ce.f(x,m)){e.next=12;break}return d({error:g="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(g)});case 12:if(O=o.receivers.map((function(e){return{address:e.address,amount:e.amount}})),!u){e.next=28;break}return e.next=16,c({formatReceiverList:O,noBroadcast:!0});case 16:if(k=e.sent,1===(y=k.outputs.length-1)){e.next=22;break}return d({error:T="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(T)});case 22:P=k.outputs[y],r.push({tx:k,isBsv:!0,noBroadcast:!!o.noBroadcast}),(i=[]).push({txId:k.id,outputIndex:y,satoshis:P.satoshis,wif:f.privateKey,address:new C.bsv.PrivateKey(f.privateKey,S.network).toAddress(S.network)}),e.next=38;break;case 28:return e.next=30,s({formatReceiverList:O,token:p,decimal:h,genesis:o.genesis,rabinApis:v,utxos:i,noBroadcast:!0});case 30:I=e.sent,A=I.routeCheckTx,B=I.tx,r.push({tx:B,routeCheckTx:A,isBsv:!1,noBroadcast:!!o.noBroadcast}),F=B.outputs.length-1,N=B.outputs[F],(i=[]).push({txId:B.id,outputIndex:F,satoshis:N.satoshis,wif:f.privateKey,address:new C.bsv.PrivateKey(f.privateKey,S.network).toAddress(S.network)});case 38:case"end":return e.stop()}}),e)})),p=0;case 5:if(!(p<t.length)){e.next=13;break}return e.delegateYield(u(p),"t0",7);case 7:if("object"!==typeof(h=e.t0)){e.next=10;break}return e.abrupt("return",h.v);case 10:p++,e.next=5;break;case 13:x=0,v=r;case 14:if(!(x<v.length)){e.next=29;break}if((j=v[x]).noBroadcast){e.next=23;break}if(!j.routeCheckTx){e.next=20;break}return e.next=20,Object(B.a)(S.network,j.routeCheckTx.serialize(!0));case 20:if(!j.tx){e.next=23;break}return e.next=23,Object(B.a)(S.network,j.tx.serialize(!0));case 23:(m={txid:j.tx.hash,outputs:Object(B.j)(S.network,j.tx.serialize(!0)).outputs,fee:j.tx.getFee(),isBsv:j.isBsv,txHex:j.tx.serialize(!0)}).isBsv||(m.routeCheckTxid=j.routeCheckTx.hash,m.routeCheckTxHex=j.routeCheckTx.serialize(!0),m.routeCheckOutputs=Object(B.j)(S.network,j.routeCheckTx.serialize(!0)).outputs),b.push(m);case 26:x++,e.next=14;break;case 29:H(!1),d({response:Object(o.a)({},b)});case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),function(){var e=Object(r.a)(n.a.mark((function e(){var r,b,o,i,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},b=[],o=n.a.mark((function e(o){var i,u,p,h,x,v,j,m,g,O,k,y,T,P,I,A,B,F,N;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t[o],u=!i.genesis,p=K.find((function(e){return e.genesis===i.genesis})),h=u?8:p.tokenDecimal,x=u?l.balance:p.balance,v=i.rabinApis,j=a["receiverList".concat(o)].reduce((function(e,a){return ce.j(e,a.amount)}),0),m=ce.i(j,ce.c(h)),!ce.f(x,m)){e.next=12;break}return d({error:g="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(g)});case 12:if(O=i.receivers.map((function(e){return{address:e.address,amount:e.amount}})),!u){e.next=28;break}return e.next=16,c({formatReceiverList:O,noBroadcast:!0});case 16:if(k=e.sent,1===(y=k.outputs.length-1)){e.next=22;break}return d({error:T="Insufficient ft balance"}),e.abrupt("return",{v:w.b.error(T)});case 22:P=k.outputs[y],r.bsvRawTx=k.toString(),(b=[]).push({txId:k.id,outputIndex:y,satoshis:P.satoshis,wif:f.privateKey,address:new C.bsv.PrivateKey(f.privateKey,S.network).toAddress(S.network)}),e.next=39;break;case 28:return e.next=30,s({formatReceiverList:O,token:p,decimal:h,genesis:i.genesis,rabinApis:v,utxos:b,noBroadcast:!0});case 30:I=e.sent,A=I.amountCheckTx,B=I.tx,r.amountCheckRawTx=A.toString(),r.tokenRawTx=B.toString(),F=B.outputs.length-1,N=B.outputs[F],(b=[]).push({txId:B.id,outputIndex:F,satoshis:N.satoshis,wif:f.privateKey,address:new C.bsv.PrivateKey(f.privateKey,S.network).toAddress(S.network)});case 39:case"end":return e.stop()}}),e)})),i=0;case 4:if(!(i<t.length)){e.next=12;break}return e.delegateYield(o(i),"t0",6);case 6:if("object"!==typeof(u=e.t0)){e.next=9;break}return e.abrupt("return",u.v);case 9:i++,e.next=4;break;case 12:H(!1),d({response:r});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h.a.confirm({title:"Confirm the transaction",onOk:function(){b()}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(de.jsx)(j.a,{className:"card",title:Object(de.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){c()},children:[Object(de.jsx)(P.a,{}),"Transfer"]}),loading:z,bordered:!1,children:Object(de.jsxs)(v.a,{form:N,layout:"vertical",onFinish:R,children:[t.map((function(e,a){var t=!e.genesis,c=K.find((function(a){return a.genesis===e.genesis}));if(!t&&!c)return null;var n=t?"BSV":c.tokenSymbol,r=t?8:c.tokenDecimal,s=t?l.balance:c.balance,d=Object(B.b)(s,r),b=!(e.receivers.length>0);return Object(de.jsxs)("div",{children:[Object(de.jsx)("div",{className:"transfer-line",children:t?"Coin: ".concat(n):"Token: ".concat(n)}),!t&&Object(de.jsxs)("div",{className:"transfer-line",children:["Genesis: ",c.genesis]}),!t&&Object(de.jsxs)("div",{className:"transfer-line",children:["Codehash: ",c.codehash]}),Object(de.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(de.jsx)(g.a,{span:14,children:Object(de.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(de.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(d)}),Object(de.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(f.address)}),Object(de.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(de.jsx)(g.a,{span:14,children:Object(de.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(de.jsx)(v.a.List,{name:"receiverList".concat(a),children:function(e,a){var t=a.add,c=a.remove;return Object(de.jsxs)(de.Fragment,{children:[e.map((function(e,a,t){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return Object(de.jsxs)(k.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(de.jsx)(v.a.Item,Object(o.a)(Object(o.a)({},r),{},{name:[a,"address"],fieldKey:[t,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,a){return Object(B.i)(S.network,a)?Promise.resolve():Promise.reject()}}],children:Object(de.jsx)(x.a,{placeholder:"Input the address",disabled:!b})})),Object(de.jsx)(v.a.Item,Object(o.a)(Object(o.a)({},r),{},{name:[a,"amount"],fieldKey:[t,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(de.jsx)(y.a,{placeholder:"Amount",min:0,disabled:!b})})),Object(de.jsx)(p.a,{disabled:!b,size:"small",onClick:function(){return c(a)},shape:"circle",icon:Object(de.jsx)(I.a,{})})]},e.fieldKey)})),Object(de.jsx)(v.a.Item,{children:Object(de.jsx)(p.a,{type:"dashed",onClick:function(){return t()},icon:Object(de.jsx)(A.a,{}),disabled:!b,children:"Add Output"})})]})}})]},a)})),Object(de.jsx)(v.a.Item,{children:Object(de.jsx)(p.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}function xe(e){var a=e.genesis,t=void 0===a?"":a,c=e.initReceivers,d=void 0===c?[]:c,b=e.rabinApis,f=void 0===b?[]:b,u=e.onCancel,l=e.onTransferCallback,O=e.noBroadcast,S=E("key"),T=Object(i.a)(S,1)[0],K=E("bsvBalance"),C=Object(i.a)(K,1)[0],F=E("account"),N=Object(i.a)(F,1)[0],L=E("sensibleFtList"),_=Object(i.a)(L,1)[0],z=v.a.useForm(),H=Object(i.a)(z,1)[0],R=Object(s.useState)(!1),q=Object(i.a)(R,2),D=q[0],W=q[1],M=!(d.length>0);if(te((function(){var e=""===t,a=_.find((function(e){return e.genesis===t})),c=e?8:a.tokenDecimal;console.log("initReceivers",d,d.map((function(e){return{address:e.address,amount:ce.i(e.amount,ce.c(c))}}))),H.setFieldsValue({receiverList:d.map((function(e){return{address:e.address,amount:ce.b(e.amount,ce.c(c))}}))})}),T&&C&&d.length),!T)return null;if(!C)return null;if(t&&!_.length)return null;var J=""===t,V=_.find((function(e){return e.genesis===t}));if(!J&&!V)return null;var G=J?"BSV":V.tokenSymbol,U=J?8:V.tokenDecimal,Y=J?C.balance:V.balance,Z=Object(B.b)(Y,U),Q=function(){var e=Object(r.a)(n.a.mark((function e(){var a,t,c,s,d,b,i,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=H.getFieldsValue(),t=a.receiverList,c=t.reduce((function(e,a){return ce.j(e,a.amount)}),0),s=ce.i(c,ce.c(U)),!ce.f(Y,s)){e.next=7;break}return l({error:d="Insufficient ft balance"}),e.abrupt("return",w.b.error(d));case 7:b=t.map((function(e){return{address:e.address,amount:ce.i(e.amount,ce.c(U))}})),i=function(){var e=Object(r.a)(n.a.mark((function e(){var a,t,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),a="",e.prev=2,e.next=5,Object(B.l)(N.network,T.privateKey,b,O);case 5:c=e.sent,O?(t={txid:c.hash,txHex:c.serialize(!0),outputs:Object(B.j)(N.network,c.serialize(!0)).outputs,fee:c.getFee()},a=c.hash):(t=c,a=c.txid),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(2),r="broadcast error: "+e.t0.toString(),console.log(ce.k({type:"bsvTransferFail",msg:r,account:{network:N.network,address:T.address},receivers:b})),ne.a(e.t0),ne.b("bsvTransferFail_".concat(T.address)),l({error:r}),console.log("broadcast bsv error "),console.error(e.t0),w.b.error(e.t0.toString());case 19:W(!1),a&&(console.log(ce.k(Object(o.a)({type:"bsvTransferSuccess",account:{network:N.network,address:T.address},receivers:b,txid:a},t))),ne.b("bsvTransferSuccess_".concat(T.address,"_").concat(a)),l({response:Object(o.a)({},t)}),h.a.success({title:"Transaction broadcast success",content:Object(de.jsxs)("div",{children:["txid:"," ",Object(de.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(B.h)(N.network,a),children:a})]})}));case 21:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(n.a.mark((function e(){var a,t,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),a="",e.prev=2,e.next=5,le(f);case 5:return c=e.sent,e.next=8,Object(B.m)(N.network,c,T.privateKey,b,V.codehash,V.genesis,!1,O);case 8:r=e.sent,O?(t={txid:r.tx.hash,outputs:Object(B.j)(N.network,r.tx.serialize(!0)).outputs,fee:r.tx.getFee(),routeCheckTxid:r.routeCheckTx.hash,txHex:r.tx.serialize(!0),routeCheckTxHex:r.routeCheckTx.serialize(!0),routeCheckOutputs:Object(B.j)(N.network,r.routeCheckTx.serialize(!0)).outputs},a=r.tx.hash):(t=r,a=r.txid),e.next=21;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("broadcast sensible ft error "),console.error(e.t0),w.b.error(e.t0.toString()),console.log(ce.k({type:"ftTransferFail",msg:ce.k(e.t0.message),account:{network:N.network,address:T.address},genesis:V.genesis,codehash:V.codehash,receivers:b})),ne.a(e.t0),ne.b("ftTransferFail_".concat(T.address,"_").concat(V.genesis,"_").concat(V.genesis)),l({error:e.t0.toString()});case 21:W(!1),a&&(console.log(ce.k(Object(o.a)({type:"ftTransferSuccess,",account:{network:N.network,address:T.address,genesis:V.genesis,codehash:V.codehash},receivers:b,txid:a},t))),ne.b("ftTransferSuccess_".concat(T.address,"_").concat(a)),l({response:Object(o.a)({},t)}),h.a.success({title:"Transaction broadcast success",content:Object(de.jsxs)("div",{children:["txid:"," ",Object(de.jsx)("a",{target:"_blank",rel:"noreferrer",href:Object(B.h)(N.network,a),children:a})]})}));case 23:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),h.a.confirm({title:"Confirm the transaction",onOk:function(){J?i():u()}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(de.jsx)(j.a,{className:"card",title:Object(de.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){u()},children:[Object(de.jsx)(P.a,{}),"Transfer"]}),loading:D,bordered:!1,children:Object(de.jsxs)(v.a,{form:H,layout:"vertical",onFinish:Q,children:[Object(de.jsx)("div",{className:"transfer-line",children:J?"Coin: ".concat(G):"Token: ".concat(G)}),!J&&Object(de.jsxs)("div",{className:"transfer-line",children:["Genesis: ",V.genesis]}),!J&&Object(de.jsxs)("div",{className:"transfer-line",children:["Codehash: ",V.codehash]}),Object(de.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(de.jsx)(g.a,{span:14,children:Object(de.jsx)("div",{style:{fontWeight:700},children:"Input"})})}),Object(de.jsx)("div",{className:"transfer-line",children:"Balance: ".concat(Z)}),Object(de.jsx)("div",{className:"transfer-line",children:"From Address: ".concat(T.address)}),Object(de.jsx)(m.a,{justify:"space-between",style:{margin:"10px 0"},children:Object(de.jsx)(g.a,{span:14,children:Object(de.jsx)("div",{style:{fontWeight:700},children:"Output"})})}),Object(de.jsx)(v.a.List,{name:"receiverList",children:function(e,a){var t=a.add,c=a.remove;return Object(de.jsxs)(de.Fragment,{children:[e.map((function(e,a,t){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return Object(de.jsxs)(k.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[Object(de.jsx)(v.a.Item,Object(o.a)(Object(o.a)({},r),{},{name:[a,"address"],fieldKey:[t,"address"],rules:[{required:!0,message:"Please input the address"},{message:"invalid address",validator:function(e,a){return Object(B.i)(N.network,a)?Promise.resolve():Promise.reject()}}],children:Object(de.jsx)(x.a,{placeholder:"Input the address",disabled:!M})})),Object(de.jsx)(v.a.Item,Object(o.a)(Object(o.a)({},r),{},{name:[a,"amount"],fieldKey:[t,"amount"],rules:[{required:!0,message:"Please input amount"}],children:Object(de.jsx)(y.a,{placeholder:"Amount",min:0,disabled:!M})})),Object(de.jsx)(p.a,{disabled:!M,size:"small",onClick:function(){return c(a)},shape:"circle",icon:Object(de.jsx)(I.a,{})})]},e.fieldKey)})),Object(de.jsx)(v.a.Item,{children:Object(de.jsx)(p.a,{type:"dashed",onClick:function(){return t()},icon:Object(de.jsx)(A.a,{}),disabled:!M,children:"Add Output"})})]})}}),Object(de.jsx)(v.a.Item,{children:Object(de.jsx)(p.a,{type:"primary",htmlType:"submit",block:!0,children:"Transfer"})})]})})}var ve=function(){Object(s.useEffect)((function(){X(M())}),[]);var e=Object(s.useState)(!1),a=Object(i.a)(e,2),t=a[0],c=a[1],n=Object(s.useState)(""),r=Object(i.a)(n,2),d=r[0],b=r[1],f=E("account"),u=Object(i.a)(f,1)[0],l=E("key"),p=Object(i.a)(l,1)[0],x=E("bsvBalance"),v=Object(i.a)(x,1)[0],j=E("sensibleFtList"),m=Object(i.a)(j,1)[0],g=Object(s.useState)([]),O=Object(i.a)(g,2),w=O[0],k=O[1],y=Object(s.useState)([]),S=Object(i.a)(y,2),T=S[0],P=S[1],I=Object(s.useState)([]),A=Object(i.a)(I,2),K=A[0],C=A[1],B=Object(s.useState)(!1),N=Object(i.a)(B,2),L=N[0],_=N[1],z=function(){c(!1),b("")},H=function(){if(!window.opener)return null;var e=window.location.hash.substr(1);try{var a=JSON.parse(decodeURIComponent(e));if("popup"===a.type&&"object"===typeof a.data)return a}catch(t){}return null},R=function(e){var a=H();a&&F(window.opener,"*").emit(a.id,{type:"response",data:Object(o.a)(Object(o.a)({},a.data.data),e)})},q=(null===p||void 0===p?void 0:p.address)&&(null===u||void 0===u?void 0:u.network),D=q&&v&&ce.e(v.balance,0);return te((function(){var e=H();if(e&&"request"===e.data.type){var a=e.data.data,t=a.method,c=a.params;"requestAccount"===t&&h.a.confirm({title:"Connect",content:Object(de.jsxs)("div",{children:["Allow ",Object(de.jsx)("b",{children:c.name})," to connect your web wallet"]}),onOk:function(){R({response:!0})},onCancel:function(){R({error:"user reject"})}})}}),!!q),te((function(){var e=H();if(console.log("bsv hash data",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,n=a.params;if("transferBsv"===t){var r=n.receivers.reduce((function(e,a){return ce.j(e,a.amount)}),0);ce.d(r,v.balance)?R({error:"insufficient bsv balance"}):(c(!0),k(n.receivers),_(n.noBroadcast))}}}),!!D),te((function(){var e=H();if(console.log("hashdata",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,n=a.params;if("transferSensibleFt"===t){var r=n.receivers.reduce((function(e,a){return ce.j(e,a.amount)}),0);console.log("outputTotal",r);var s=m.find((function(e){return e.genesis===n.genesis}));console.log("ft",s),s?ce.d(r,s.balance)?R({error:"insufficient ft balance"}):(c(!0),b(n.genesis),k(n.receivers),C(n.rabinApis),_(n.noBroadcast)):R({error:"insufficient ft balance"})}}}),!!D),te((function(){var e=H();if(console.log("bsv hash data",e),e&&"request"===e.data.type){var a=e.data.data,t=a.method,n=a.params;"transferAll"===t&&n.datas.forEach((function(e){var a=!e.genesis,t=m.find((function(a){return a.genesis===e.genesis})),r=e.receivers.reduce((function(e,a){return ce.j(e,a.amount)}),0);a&&ce.d(r,v.balance)?R({error:"insufficient bsv balance"}):t&&ce.d(r,t.balance)?R({error:"insufficient ft balance"}):(c(!0),P(n.datas))}))}}),!!D),Object(s.useEffect)((function(){var e=window.onbeforeunload;window.onbeforeunload=function(a){return R({error:"use closed"}),e&&e(a)}})),Object(de.jsxs)("div",{className:"App",style:{overflow:"hidden"},children:[Object(de.jsx)(fe,{accountName:"harry"}),Object(de.jsx)(oe,{}),!t&&Object(de.jsx)(ie,{onTransfer:function(e){c(!0),e&&b(e)}}),t&&(!T||T.length<1?Object(de.jsx)(xe,{genesis:d,rabinApis:K,onCancel:z,onTransferCallback:R,initReceivers:w,noBroadcast:L}):Object(de.jsx)(he,{onCancel:z,onTransferCallback:R,initDatas:T}))]})},je=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,906)).then((function(a){var t=a.getCLS,c=a.getFID,n=a.getFCP,r=a.getLCP,s=a.getTTFB;t(e),c(e),n(e),r(e),s(e)}))},me=t(894),ge=t(482);!function(){var e=q.SensibleApi.prototype.broadcast;q.SensibleApi.prototype.broadcast=function(){var a=Object(r.a)(n.a.mark((function a(t){var c,r,s,d;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=new C.bsv.Transaction(t).hash,r="txid: ".concat(c,"; rawtx: ").concat(t),console.log("sensible-sdk \u5e7f\u64ad",r),a.prev=3,a.next=6,e.call(this,t);case 6:return s=a.sent,a.abrupt("return",s);case 10:throw a.prev=10,a.t0=a.catch(3),console.log("sensible-sdk \u5e7f\u64ad\u9519\u8bef",r),d=new Error("".concat(a.t0.message," sensible-sdk \u5e7f\u64ad\u9519\u8bef ").concat(r)),setTimeout((function(){throw d}),0),a.t0;case 16:case"end":return a.stop()}}),a,this,[[3,10]])})));return function(e){return a.apply(this,arguments)}}()}();var Oe=window===window.top;me.a({dsn:"https://d223c2a1d1bf44b6a657051ac9a99b16@o877284.ingest.sentry.io/5827823",integrations:[new ge.a.BrowserTracing],tracesSampleRate:1}),Oe?f.a.render(Object(de.jsx)(d.a.StrictMode,{children:Object(de.jsx)(ve,{})}),document.getElementById("root")):function(){ae.apply(this,arguments)}(),function(){var e=window.onbeforeunload;window.onbeforeunload=function(a){return!!window.opener||X(null),e&&e(a)}}(),je()}},[[888,1,2]]]);
//# sourceMappingURL=main.2438c83e.chunk.js.map